import{j as o,a3 as Te,a4 as yr,a5 as pe,S as U,a6 as wr,T as me,i as v,l as le,r as I,c as ze,a as ae,a8 as Ue,B as re,a9 as Pe,aa as Ge,ab as He,ac as ue,G as A,I as ce,ad as xe,q as Qe,af as Xe,ag as Ye,d as Ze,ae as ge,av as ye,aw as Fr,ax as Je,ah as Er,M as er,ai as Ir,o as rr,J as Br,K as jr,aj as Cr,Q as br,U as Sr,W as Rr,X as Ar,Y as Ce,Z as be,$ as Ve,a0 as Tr,ak as Ur,al as Pr,P as Mr,am as kr,N as Dr,an as Lr,ao as vr,ap as Se,aq as Re,ay as Nr}from"./index-4a286e5b.js";import{D as _r,P as Kr,R as Or,r as $r,I as We,a as Jr}from"./index-12584614.js";import{a as Vr}from"./app-cb24a545.js";import{L as tr,A as nr,a as ir,C as Wr,E as qr}from"./CircularWithPath-2be210af.js";import{S as zr,H as Gr}from"./SelectColumnSorting-8f7c879d.js";function Hr({id:m,title:d,open:l,handleClose:p,name:f}){const u=async i=>{try{await le.delete(`/inventory/rooms/${i}`)}catch(y){throw console.error("Erro ao deletar o polo:",y),y}},h=async()=>{try{await u(m),p(),window.location.reload()}catch{}};return o.jsx(Te,{open:l,onClose:p,keepMounted:!0,TransitionComponent:yr,maxWidth:"xs","aria-labelledby":"column-delete-title","aria-describedby":"column-delete-description",children:o.jsx(pe,{sx:{mt:2,my:1},children:o.jsxs(U,{alignItems:"center",spacing:3.5,children:[o.jsx(wr,{color:"error",sx:{width:72,height:72,fontSize:"1.75rem"},children:o.jsx(_r,{})}),o.jsxs(U,{spacing:2,children:[o.jsx(me,{variant:"h4",align:"center",children:"Você tem certeza?"}),o.jsxs(me,{align:"center",children:["Você está deletando o departamento",o.jsx(me,{variant:"subtitle1",component:"span",sx:{ml:.5},children:f}),", esta operação não pode ser desfeita."]})]}),o.jsxs(U,{direction:"row",spacing:2,sx:{width:1},children:[o.jsx(v,{fullWidth:!0,onClick:p,color:"secondary",variant:"outlined",children:"Cancelar"}),o.jsx(v,{fullWidth:!0,color:"error",variant:"contained",onClick:h,autoFocus:!0,children:"Deletar"})]})]})})})}function Qr({handleClose:m,modalEdit:d,data:l}){const[p,f]=I.useState(null),[u,h]=I.useState(null),i=I.useRef(null),y=I.useRef(null),[x,F]=I.useState(!1),[w,b]=I.useState(!1),[g,j]=I.useState(!0),[k,K]=I.useState([]),_=E=>({id:E==null?void 0:E.id,sala:(E==null?void 0:E.sala)??"",polo:(E==null?void 0:E.polo.id)??"",descricao:(E==null?void 0:E.descricao)??"",image:(E==null?void 0:E.imagem)??""}),X=ze().shape({sala:ae().max(255).required("Nome é obrigatorio"),polo:ae().max(255).required("Nome do Polo é obrigatorio"),description:ae().max(500)}),O=Ue({initialValues:_(l),validationSchema:X,enableReinitialize:!0,onSubmit:async(E,{setSubmitting:Z})=>{try{const V=new FormData;if(V.append("sala",String(E.sala)),V.append("poloId",String(E.polo)),V.append("descricao",E.descricao),E.image){const Ee=await(await fetch(E.image)).blob();V.append("imagem",Ee,"captured-photo.png")}await le.put(`/inventory/rooms/${l.id}`,V,{headers:{"Content-Type":"multipart/form-data"}}),Z(!1),m(!1),window.location.reload()}catch(V){console.error("Error saving data:",V)}}}),{errors:N,touched:D,handleSubmit:Y,getFieldProps:J,setFieldValue:z}=O,R=()=>{p&&(p.getTracks().forEach(E=>{E.stop()}),f(null)),F(!1)},G=()=>{if(i.current&&y.current){const E=y.current.getContext("2d");if(E){y.current.width=i.current.videoWidth,y.current.height=i.current.videoHeight,E.drawImage(i.current,0,0);const Z=y.current.toDataURL("image/png");h(Z),z("image",Z),R()}}},C=()=>{h(null),z("image",null)},q=async()=>{try{const E=await le.get("/inventory/polo/details");K(E.data.polos)}catch(E){console.error("Error fetching polos:",E)}finally{j(!1)}};return I.useEffect(()=>{q()},[]),o.jsx("div",{children:o.jsx(Te,{open:d,keepMounted:!0,onClose:()=>m(!1),"aria-describedby":"alert-dialog-slide-description",children:o.jsx(re,{sx:{p:1,py:1.5},children:o.jsx(pe,{children:o.jsx(Pe,{value:O,children:o.jsx(tr,{dateAdapter:nr,children:o.jsxs(Ge,{autoComplete:"off",noValidate:!0,onSubmit:Y,children:[o.jsx(He,{children:"Editar Sala"}),o.jsx(ue,{}),o.jsx(pe,{sx:{p:2.5},children:o.jsx(A,{container:!0,spacing:3,children:o.jsx(A,{item:!0,xs:12,children:o.jsxs(A,{container:!0,spacing:3,children:[o.jsx(A,{item:!0,xs:12,sm:6,children:o.jsxs(U,{spacing:1,children:[o.jsx(ce,{htmlFor:"sala",children:"Nome da Sala"}),o.jsx(xe,{fullWidth:!0,id:"sala",placeholder:"Nome",...J("sala"),error:!!(D.sala&&N.sala),helperText:o.jsx(o.Fragment,{children:D.sala&&N.sala})})]})}),o.jsx(A,{item:!0,xs:12,sm:4,children:o.jsxs(U,{spacing:1,children:[o.jsx(ce,{htmlFor:"polo",children:"polo"}),o.jsxs(Qe,{fullWidth:!0,error:!!(D.polo&&N.polo),children:[o.jsx(Xe,{id:"polo",placeholder:"Nome",...J("polo"),value:O.values.polo,children:!g&&k.map(E=>o.jsx(Ye,{value:E.id,children:E.polo},"p_"+E.id))}),D.polo&&N.polo&&o.jsx(Ze,{children:typeof N.polo})]})]})}),o.jsx(A,{item:!0,xs:12,children:o.jsxs(U,{spacing:1,children:[o.jsx(ce,{htmlFor:"descricao",children:"Descrição"}),o.jsx(xe,{fullWidth:!0,id:"descricao",multiline:!0,minRows:2,placeholder:"Descrição",...J("descricao"),error:!!(D.descricao&&N.descricao),helperText:o.jsx(o.Fragment,{children:D.descricao&&N.descricao})})]})}),o.jsx(A,{item:!0,xs:12,children:o.jsxs(U,{spacing:1,sx:{alignItems:"center",justifyContent:"center"},children:[w&&o.jsx(re,{style:{display:"flex",width:"20%",height:"auto",marginTop:20,justifyContent:"center",alignItems:"center"},children:o.jsx(ir,{})}),!x&&!O.values.img&&!w&&o.jsx(v,{variant:"contained",onClick:()=>{},children:"alterar imagem"}),x&&o.jsxs(o.Fragment,{children:[o.jsx("video",{ref:i,style:{width:"20%",height:"auto",marginTop:20}}),o.jsx("canvas",{ref:y,style:{display:"none"}}),o.jsxs(U,{direction:"row",spacing:2,style:{marginTop:20},children:[o.jsx(v,{variant:"outlined",color:"error",onClick:R,children:"Cancelar"}),o.jsx(v,{variant:"contained",onClick:G,children:"Tirar Foto"})]})]}),u&&o.jsxs(U,{spacing:2,style:{marginTop:20,alignItems:"center"},children:[o.jsx("img",{src:u,alt:"Captured",style:{width:"20%",height:"auto"}}),o.jsx(v,{variant:"outlined",color:"error",onClick:C,children:"Remover Foto"})]}),!u&&!x&&o.jsx("img",{src:`${Vr.api_url}/${O.values.image}`,alt:"Sala",style:{width:"20%",height:"auto",marginTop:20}})]})})]})})})}),o.jsx(ue,{}),o.jsxs(ge,{sx:{p:2.5},children:[o.jsx(A,{container:!0,justifyContent:"space-between",alignItems:"center",children:o.jsx(A,{item:!0})}),o.jsxs(ge,{children:[o.jsx(v,{color:"error",onClick:()=>m(!1),children:"Cancelar"}),o.jsx(v,{variant:"contained",type:"submit",children:"Cadastrar"})]})]})]})})})})})})})}var or={},we={};we.byteLength=Zr;we.toByteArray=rt;we.fromByteArray=it;var Q=[],W=[],Xr=typeof Uint8Array<"u"?Uint8Array:Array,Ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ie=0,Yr=Ae.length;ie<Yr;++ie)Q[ie]=Ae[ie],W[Ae.charCodeAt(ie)]=ie;W["-".charCodeAt(0)]=62;W["_".charCodeAt(0)]=63;function sr(m){var d=m.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=m.indexOf("=");l===-1&&(l=d);var p=l===d?0:4-l%4;return[l,p]}function Zr(m){var d=sr(m),l=d[0],p=d[1];return(l+p)*3/4-p}function et(m,d,l){return(d+l)*3/4-l}function rt(m){var d,l=sr(m),p=l[0],f=l[1],u=new Xr(et(m,p,f)),h=0,i=f>0?p-4:p,y;for(y=0;y<i;y+=4)d=W[m.charCodeAt(y)]<<18|W[m.charCodeAt(y+1)]<<12|W[m.charCodeAt(y+2)]<<6|W[m.charCodeAt(y+3)],u[h++]=d>>16&255,u[h++]=d>>8&255,u[h++]=d&255;return f===2&&(d=W[m.charCodeAt(y)]<<2|W[m.charCodeAt(y+1)]>>4,u[h++]=d&255),f===1&&(d=W[m.charCodeAt(y)]<<10|W[m.charCodeAt(y+1)]<<4|W[m.charCodeAt(y+2)]>>2,u[h++]=d>>8&255,u[h++]=d&255),u}function tt(m){return Q[m>>18&63]+Q[m>>12&63]+Q[m>>6&63]+Q[m&63]}function nt(m,d,l){for(var p,f=[],u=d;u<l;u+=3)p=(m[u]<<16&16711680)+(m[u+1]<<8&65280)+(m[u+2]&255),f.push(tt(p));return f.join("")}function it(m){for(var d,l=m.length,p=l%3,f=[],u=16383,h=0,i=l-p;h<i;h+=u)f.push(nt(m,h,h+u>i?i:h+u));return p===1?(d=m[l-1],f.push(Q[d>>2]+Q[d<<4&63]+"==")):p===2&&(d=(m[l-2]<<8)+m[l-1],f.push(Q[d>>10]+Q[d>>4&63]+Q[d<<2&63]+"=")),f.join("")}var Me={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Me.read=function(m,d,l,p,f){var u,h,i=f*8-p-1,y=(1<<i)-1,x=y>>1,F=-7,w=l?f-1:0,b=l?-1:1,g=m[d+w];for(w+=b,u=g&(1<<-F)-1,g>>=-F,F+=i;F>0;u=u*256+m[d+w],w+=b,F-=8);for(h=u&(1<<-F)-1,u>>=-F,F+=p;F>0;h=h*256+m[d+w],w+=b,F-=8);if(u===0)u=1-x;else{if(u===y)return h?NaN:(g?-1:1)*(1/0);h=h+Math.pow(2,p),u=u-x}return(g?-1:1)*h*Math.pow(2,u-p)};Me.write=function(m,d,l,p,f,u){var h,i,y,x=u*8-f-1,F=(1<<x)-1,w=F>>1,b=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=p?0:u-1,j=p?1:-1,k=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(i=isNaN(d)?1:0,h=F):(h=Math.floor(Math.log(d)/Math.LN2),d*(y=Math.pow(2,-h))<1&&(h--,y*=2),h+w>=1?d+=b/y:d+=b*Math.pow(2,1-w),d*y>=2&&(h++,y/=2),h+w>=F?(i=0,h=F):h+w>=1?(i=(d*y-1)*Math.pow(2,f),h=h+w):(i=d*Math.pow(2,w-1)*Math.pow(2,f),h=0));f>=8;m[l+g]=i&255,g+=j,i/=256,f-=8);for(h=h<<f|i,x+=f;x>0;m[l+g]=h&255,g+=j,h/=256,x-=8);m[l+g-j]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(m){const d=we,l=Me,p=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;m.Buffer=i,m.SlowBuffer=X,m.INSPECT_MAX_BYTES=50;const f=2147483647;m.kMaxLength=f,i.TYPED_ARRAY_SUPPORT=u(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function h(t){if(t>f)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,i.prototype),e}function i(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(t)}return y(t,e,r)}i.poolSize=8192;function y(t,e,r){if(typeof t=="string")return b(t,e);if(ArrayBuffer.isView(t))return j(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(H(t,ArrayBuffer)||t&&H(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(H(t,SharedArrayBuffer)||t&&H(t.buffer,SharedArrayBuffer)))return k(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return i.from(n,e,r);const s=K(t);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return i.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}i.from=function(t,e,r){return y(t,e,r)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function x(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function F(t,e,r){return x(t),t<=0?h(t):e!==void 0?typeof r=="string"?h(t).fill(e,r):h(t).fill(e):h(t)}i.alloc=function(t,e,r){return F(t,e,r)};function w(t){return x(t),h(t<0?0:_(t)|0)}i.allocUnsafe=function(t){return w(t)},i.allocUnsafeSlow=function(t){return w(t)};function b(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!i.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=O(t,e)|0;let n=h(r);const s=n.write(t,e);return s!==r&&(n=n.slice(0,s)),n}function g(t){const e=t.length<0?0:_(t.length)|0,r=h(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function j(t){if(H(t,Uint8Array)){const e=new Uint8Array(t);return k(e.buffer,e.byteOffset,e.byteLength)}return g(t)}function k(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,i.prototype),n}function K(t){if(i.isBuffer(t)){const e=_(t.length)|0,r=h(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||je(t.length)?h(0):g(t);if(t.type==="Buffer"&&Array.isArray(t.data))return g(t.data)}function _(t){if(t>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return t|0}function X(t){return+t!=t&&(t=0),i.alloc(+t)}i.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==i.prototype},i.compare=function(e,r){if(H(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),H(r,Uint8Array)&&(r=i.from(r,r.offset,r.byteLength)),!i.isBuffer(e)||!i.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,s=r.length;for(let a=0,c=Math.min(n,s);a<c;++a)if(e[a]!==r[a]){n=e[a],s=r[a];break}return n<s?-1:s<n?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return i.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;const s=i.allocUnsafe(r);let a=0;for(n=0;n<e.length;++n){let c=e[n];if(H(c,Uint8Array))a+c.length>s.length?(i.isBuffer(c)||(c=i.from(c)),c.copy(s,a)):Uint8Array.prototype.set.call(s,c,a);else if(i.isBuffer(c))c.copy(s,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=c.length}return s};function O(t,e){if(i.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||H(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Be(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return $e(t).length;default:if(s)return n?-1:Be(t).length;e=(""+e).toLowerCase(),s=!0}}i.byteLength=O;function N(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return lr(this,e,r);case"utf8":case"utf-8":return Z(this,e,r);case"ascii":return Ee(this,e,r);case"latin1":case"binary":return cr(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ur(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}i.prototype._isBuffer=!0;function D(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}i.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)D(this,r,r+1);return this},i.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)D(this,r,r+3),D(this,r+1,r+2);return this},i.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)D(this,r,r+7),D(this,r+1,r+6),D(this,r+2,r+5),D(this,r+3,r+4);return this},i.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?Z(this,0,e):N.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:i.compare(this,e)===0},i.prototype.inspect=function(){let e="";const r=m.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},p&&(i.prototype[p]=i.prototype.inspect),i.prototype.compare=function(e,r,n,s,a){if(H(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),s===void 0&&(s=0),a===void 0&&(a=this.length),r<0||n>e.length||s<0||a>this.length)throw new RangeError("out of range index");if(s>=a&&r>=n)return 0;if(s>=a)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,s>>>=0,a>>>=0,this===e)return 0;let c=a-s,B=n-r;const P=Math.min(c,B),T=this.slice(s,a),M=e.slice(r,n);for(let S=0;S<P;++S)if(T[S]!==M[S]){c=T[S],B=M[S];break}return c<B?-1:B<c?1:0};function Y(t,e,r,n,s){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,je(r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0)if(s)r=0;else return-1;if(typeof e=="string"&&(e=i.from(e,n)),i.isBuffer(e))return e.length===0?-1:J(t,e,r,n,s);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):J(t,[e],r,n,s);throw new TypeError("val must be string, number or Buffer")}function J(t,e,r,n,s){let a=1,c=t.length,B=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;a=2,c/=2,B/=2,r/=2}function P(M,S){return a===1?M[S]:M.readUInt16BE(S*a)}let T;if(s){let M=-1;for(T=r;T<c;T++)if(P(t,T)===P(e,M===-1?0:T-M)){if(M===-1&&(M=T),T-M+1===B)return M*a}else M!==-1&&(T-=T-M),M=-1}else for(r+B>c&&(r=c-B),T=r;T>=0;T--){let M=!0;for(let S=0;S<B;S++)if(P(t,T+S)!==P(e,S)){M=!1;break}if(M)return T}return-1}i.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1},i.prototype.indexOf=function(e,r,n){return Y(this,e,r,n,!0)},i.prototype.lastIndexOf=function(e,r,n){return Y(this,e,r,n,!1)};function z(t,e,r,n){r=Number(r)||0;const s=t.length-r;n?(n=Number(n),n>s&&(n=s)):n=s;const a=e.length;n>a/2&&(n=a/2);let c;for(c=0;c<n;++c){const B=parseInt(e.substr(c*2,2),16);if(je(B))return c;t[r+c]=B}return c}function R(t,e,r,n){return de(Be(e,t.length-r),t,r,n)}function G(t,e,r,n){return de(fr(e),t,r,n)}function C(t,e,r,n){return de($e(e),t,r,n)}function q(t,e,r,n){return de(mr(e,t.length-r),t,r,n)}i.prototype.write=function(e,r,n,s){if(r===void 0)s="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")s=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const a=this.length-r;if((n===void 0||n>a)&&(n=a),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let c=!1;for(;;)switch(s){case"hex":return z(this,e,r,n);case"utf8":case"utf-8":return R(this,e,r,n);case"ascii":case"latin1":case"binary":return G(this,e,r,n);case"base64":return C(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,e,r,n);default:if(c)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),c=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(t,e,r){return e===0&&r===t.length?d.fromByteArray(t):d.fromByteArray(t.slice(e,r))}function Z(t,e,r){r=Math.min(t.length,r);const n=[];let s=e;for(;s<r;){const a=t[s];let c=null,B=a>239?4:a>223?3:a>191?2:1;if(s+B<=r){let P,T,M,S;switch(B){case 1:a<128&&(c=a);break;case 2:P=t[s+1],(P&192)===128&&(S=(a&31)<<6|P&63,S>127&&(c=S));break;case 3:P=t[s+1],T=t[s+2],(P&192)===128&&(T&192)===128&&(S=(a&15)<<12|(P&63)<<6|T&63,S>2047&&(S<55296||S>57343)&&(c=S));break;case 4:P=t[s+1],T=t[s+2],M=t[s+3],(P&192)===128&&(T&192)===128&&(M&192)===128&&(S=(a&15)<<18|(P&63)<<12|(T&63)<<6|M&63,S>65535&&S<1114112&&(c=S))}}c===null?(c=65533,B=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|c&1023),n.push(c),s+=B}return ke(n)}const V=4096;function ke(t){const e=t.length;if(e<=V)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=V));return r}function Ee(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]&127);return n}function cr(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]);return n}function lr(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let s="";for(let a=e;a<r;++a)s+=xr[t[a]];return s}function ur(t,e,r){const n=t.slice(e,r);let s="";for(let a=0;a<n.length-1;a+=2)s+=String.fromCharCode(n[a]+n[a+1]*256);return s}i.prototype.slice=function(e,r){const n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);const s=this.subarray(e,r);return Object.setPrototypeOf(s,i.prototype),s};function L(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||L(e,r,this.length);let s=this[e],a=1,c=0;for(;++c<r&&(a*=256);)s+=this[e+c]*a;return s},i.prototype.readUintBE=i.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||L(e,r,this.length);let s=this[e+--r],a=1;for(;r>0&&(a*=256);)s+=this[e+--r]*a;return s},i.prototype.readUint8=i.prototype.readUInt8=function(e,r){return e=e>>>0,r||L(e,1,this.length),this[e]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||L(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||L(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||L(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readBigUInt64LE=ee(function(e){e=e>>>0,ne(e,"offset");const r=this[e],n=this[e+7];(r===void 0||n===void 0)&&he(e,this.length-8);const s=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,a=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(s)+(BigInt(a)<<BigInt(32))}),i.prototype.readBigUInt64BE=ee(function(e){e=e>>>0,ne(e,"offset");const r=this[e],n=this[e+7];(r===void 0||n===void 0)&&he(e,this.length-8);const s=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],a=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(s)<<BigInt(32))+BigInt(a)}),i.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||L(e,r,this.length);let s=this[e],a=1,c=0;for(;++c<r&&(a*=256);)s+=this[e+c]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*r)),s},i.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||L(e,r,this.length);let s=r,a=1,c=this[e+--s];for(;s>0&&(a*=256);)c+=this[e+--s]*a;return a*=128,c>=a&&(c-=Math.pow(2,8*r)),c},i.prototype.readInt8=function(e,r){return e=e>>>0,r||L(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},i.prototype.readInt16LE=function(e,r){e=e>>>0,r||L(e,2,this.length);const n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n},i.prototype.readInt16BE=function(e,r){e=e>>>0,r||L(e,2,this.length);const n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n},i.prototype.readInt32LE=function(e,r){return e=e>>>0,r||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,r){return e=e>>>0,r||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readBigInt64LE=ee(function(e){e=e>>>0,ne(e,"offset");const r=this[e],n=this[e+7];(r===void 0||n===void 0)&&he(e,this.length-8);const s=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(s)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),i.prototype.readBigInt64BE=ee(function(e){e=e>>>0,ne(e,"offset");const r=this[e],n=this[e+7];(r===void 0||n===void 0)&&he(e,this.length-8);const s=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)}),i.prototype.readFloatLE=function(e,r){return e=e>>>0,r||L(e,4,this.length),l.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,r){return e=e>>>0,r||L(e,4,this.length),l.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||L(e,8,this.length),l.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||L(e,8,this.length),l.read(this,e,!1,52,8)};function $(t,e,r,n,s,a){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){const B=Math.pow(2,8*n)-1;$(this,e,r,n,B,0)}let a=1,c=0;for(this[r]=e&255;++c<n&&(a*=256);)this[r+c]=e/a&255;return r+n},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){const B=Math.pow(2,8*n)-1;$(this,e,r,n,B,0)}let a=n-1,c=1;for(this[r+a]=e&255;--a>=0&&(c*=256);)this[r+a]=e/c&255;return r+n},i.prototype.writeUint8=i.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||$(this,e,r,1,255,0),this[r]=e&255,r+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||$(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||$(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||$(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||$(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function De(t,e,r,n,s){Oe(e,n,s,t,r,7);let a=Number(e&BigInt(4294967295));t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a;let c=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=c,c=c>>8,t[r++]=c,c=c>>8,t[r++]=c,c=c>>8,t[r++]=c,r}function Le(t,e,r,n,s){Oe(e,n,s,t,r,7);let a=Number(e&BigInt(4294967295));t[r+7]=a,a=a>>8,t[r+6]=a,a=a>>8,t[r+5]=a,a=a>>8,t[r+4]=a;let c=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=c,c=c>>8,t[r+2]=c,c=c>>8,t[r+1]=c,c=c>>8,t[r]=c,r+8}i.prototype.writeBigUInt64LE=ee(function(e,r=0){return De(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=ee(function(e,r=0){return Le(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){const P=Math.pow(2,8*n-1);$(this,e,r,n,P-1,-P)}let a=0,c=1,B=0;for(this[r]=e&255;++a<n&&(c*=256);)e<0&&B===0&&this[r+a-1]!==0&&(B=1),this[r+a]=(e/c>>0)-B&255;return r+n},i.prototype.writeIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){const P=Math.pow(2,8*n-1);$(this,e,r,n,P-1,-P)}let a=n-1,c=1,B=0;for(this[r+a]=e&255;--a>=0&&(c*=256);)e<0&&B===0&&this[r+a+1]!==0&&(B=1),this[r+a]=(e/c>>0)-B&255;return r+n},i.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||$(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1},i.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||$(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2},i.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||$(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2},i.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||$(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4},i.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||$(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4},i.prototype.writeBigInt64LE=ee(function(e,r=0){return De(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=ee(function(e,r=0){return Le(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ve(t,e,r,n,s,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Ne(t,e,r,n,s){return e=+e,r=r>>>0,s||ve(t,e,r,4),l.write(t,e,r,n,23,4),r+4}i.prototype.writeFloatLE=function(e,r,n){return Ne(this,e,r,!0,n)},i.prototype.writeFloatBE=function(e,r,n){return Ne(this,e,r,!1,n)};function _e(t,e,r,n,s){return e=+e,r=r>>>0,s||ve(t,e,r,8),l.write(t,e,r,n,52,8),r+8}i.prototype.writeDoubleLE=function(e,r,n){return _e(this,e,r,!0,n)},i.prototype.writeDoubleBE=function(e,r,n){return _e(this,e,r,!1,n)},i.prototype.copy=function(e,r,n,s){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!s&&s!==0&&(s=this.length),r>=e.length&&(r=e.length),r||(r=0),s>0&&s<n&&(s=n),s===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-r<s-n&&(s=e.length-r+n);const a=s-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,s):Uint8Array.prototype.set.call(e,this.subarray(n,s),r),a},i.prototype.fill=function(e,r,n,s){if(typeof e=="string"){if(typeof r=="string"?(s=r,r=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!i.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(e.length===1){const c=e.charCodeAt(0);(s==="utf8"&&c<128||s==="latin1")&&(e=c)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let a;if(typeof e=="number")for(a=r;a<n;++a)this[a]=e;else{const c=i.isBuffer(e)?e:i.from(e,s),B=c.length;if(B===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-r;++a)this[a+r]=c[a%B]}return this};const te={};function Ie(t,e,r){te[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Ie("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ie("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),Ie("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,s=r;return Number.isInteger(r)&&Math.abs(r)>2**32?s=Ke(String(r)):typeof r=="bigint"&&(s=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(s=Ke(s)),s+="n"),n+=` It must be ${e}. Received ${s}`,n},RangeError);function Ke(t){let e="",r=t.length;const n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function hr(t,e,r){ne(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&he(e,t.length-(r+1))}function Oe(t,e,r,n,s,a){if(t>r||t<e){const c=typeof e=="bigint"?"n":"";let B;throw a>3?e===0||e===BigInt(0)?B=`>= 0${c} and < 2${c} ** ${(a+1)*8}${c}`:B=`>= -(2${c} ** ${(a+1)*8-1}${c}) and < 2 ** ${(a+1)*8-1}${c}`:B=`>= ${e}${c} and <= ${r}${c}`,new te.ERR_OUT_OF_RANGE("value",B,t)}hr(n,s,a)}function ne(t,e){if(typeof t!="number")throw new te.ERR_INVALID_ARG_TYPE(e,"number",t)}function he(t,e,r){throw Math.floor(t)!==t?(ne(t,r),new te.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new te.ERR_BUFFER_OUT_OF_BOUNDS:new te.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}const pr=/[^+/0-9A-Za-z-_]/g;function dr(t){if(t=t.split("=")[0],t=t.trim().replace(pr,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Be(t,e){e=e||1/0;let r;const n=t.length;let s=null;const a=[];for(let c=0;c<n;++c){if(r=t.charCodeAt(c),r>55295&&r<57344){if(!s){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(c+1===n){(e-=3)>-1&&a.push(239,191,189);continue}s=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(e-=3)>-1&&a.push(239,191,189);if(s=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function fr(t){const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function mr(t,e){let r,n,s;const a=[];for(let c=0;c<t.length&&!((e-=2)<0);++c)r=t.charCodeAt(c),n=r>>8,s=r%256,a.push(s),a.push(n);return a}function $e(t){return d.toByteArray(dr(t))}function de(t,e,r,n){let s;for(s=0;s<n&&!(s+r>=e.length||s>=t.length);++s)e[s+r]=t[s];return s}function H(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function je(t){return t!==t}const xr=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=r*16;for(let s=0;s<16;++s)e[n+s]=t[r]+t[s]}return e}();function ee(t){return typeof BigInt>"u"?gr:t}function gr(){throw new Error("BigInt not supported")}})(or);var ar={},Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.API_URL=void 0;Fe.API_URL="http://localhost:9100/";var oe=ye&&ye.__awaiter||function(m,d,l,p){function f(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function i(F){try{x(p.next(F))}catch(w){h(w)}}function y(F){try{x(p.throw(F))}catch(w){h(w)}}function x(F){F.done?u(F.value):f(F.value).then(i,y)}x((p=p.apply(m,d||[])).next())})},se=ye&&ye.__generator||function(m,d){var l={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},p,f,u,h;return h={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function i(x){return function(F){return y([x,F])}}function y(x){if(p)throw new TypeError("Generator is already executing.");for(;l;)try{if(p=1,f&&(u=x[0]&2?f.return:x[0]?f.throw||((u=f.return)&&u.call(f),0):f.next)&&!(u=u.call(f,x[1])).done)return u;switch(f=0,u&&(x=[x[0]&2,u.value]),x[0]){case 0:case 1:u=x;break;case 4:return l.label++,{value:x[1],done:!1};case 5:l.label++,f=x[1],x=[0];continue;case 7:x=l.ops.pop(),l.trys.pop();continue;default:if(u=l.trys,!(u=u.length>0&&u[u.length-1])&&(x[0]===6||x[0]===2)){l=0;continue}if(x[0]===3&&(!u||x[1]>u[0]&&x[1]<u[3])){l.label=x[1];break}if(x[0]===6&&l.label<u[1]){l.label=u[1],u=x;break}if(u&&l.label<u[2]){l.label=u[2],l.ops.push(x);break}u[2]&&l.ops.pop(),l.trys.pop();continue}x=d.call(m,l)}catch(F){x=[6,F],f=0}finally{p=u=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}};Object.defineProperty(ar,"__esModule",{value:!0});var fe=Fe,ot=function(){function m(){var d=this;this.device={},this.getAvailablePrinters=function(){return oe(d,void 0,void 0,function(){var l,p,f,u,h;return se(this,function(i){switch(i.label){case 0:l={method:"GET",headers:{"Content-Type":"text/plain;charset=UTF-8"}},p=fe.API_URL+"available",i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(p,l)];case 2:return f=i.sent(),[4,f.json()];case 3:return u=i.sent(),u&&u!==void 0&&u.printer&&u.printer!==void 0&&u.printer.length>0?[2,u.printer]:[2,new Error("No printers available")];case 4:throw h=i.sent(),new Error(h);case 5:return[2]}})})},this.getDefaultPrinter=function(){return oe(d,void 0,void 0,function(){var l,p,f,u,h,i,y,x,F,w,b,g;return se(this,function(j){switch(j.label){case 0:l={method:"GET",headers:{"Content-Type":"text/plain;charset=UTF-8"}},p=fe.API_URL+"default",j.label=1;case 1:return j.trys.push([1,4,,5]),[4,fetch(p,l)];case 2:return f=j.sent(),[4,f.text()];case 3:if(u=j.sent(),u&&u!==void 0&&typeof u!="object"&&u.split(`
	`).length===7)return h=u.split(`
	`),i=this.cleanUpString(h[1]),y=this.cleanUpString(h[2]),x=this.cleanUpString(h[3]),F=this.cleanUpString(h[4]),w=this.cleanUpString(h[5]),b=this.cleanUpString(h[6]),[2,{connection:x,deviceType:y,manufacturer:b,name:i,provider:w,uid:F,version:0}];throw new Error("There's no default printer");case 4:throw g=j.sent(),new Error(g);case 5:return[2]}})})},this.setPrinter=function(l){d.device=l},this.getPrinter=function(){return d.device},this.cleanUpString=function(l){var p=l.split(":"),f=p[1].trim();return f},this.checkPrinterStatus=function(){return oe(d,void 0,void 0,function(){var l,p,f,u,h,i,y;return se(this,function(x){switch(x.label){case 0:return[4,this.write("~HQES")];case 1:return x.sent(),[4,this.read()];case 2:switch(l=x.sent(),p=[],f=!1,u=l.charAt(70),h=l.charAt(88),i=l.charAt(87),y=l.charAt(84),f=u==="0",h){case"1":p.push("Paper out");break;case"2":p.push("Ribbon Out");break;case"4":p.push("Media Door Open");break;case"8":p.push("Cutter Fault");break}switch(i){case"1":p.push("Printhead Overheating");break;case"2":p.push("Motor Overheating");break;case"4":p.push("Printhead Fault");break;case"8":p.push("Incorrect Printhead");break}return y==="1"&&p.push("Printer Paused"),!f&&p.length===0&&p.push("Error: Unknown Error"),[2,{isReadyToPrint:f,errors:p.join()}]}})})},this.write=function(l){return oe(d,void 0,void 0,function(){var p,f,u,h;return se(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),p=fe.API_URL+"write",f={device:this.device,data:l},u={method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify(f)},[4,fetch(p,u)];case 1:return i.sent(),[3,3];case 2:throw h=i.sent(),new Error(h);case 3:return[2]}})})},this.read=function(){return oe(d,void 0,void 0,function(){var l,p,f,u,h,i;return se(this,function(y){switch(y.label){case 0:return y.trys.push([0,3,,4]),l=fe.API_URL+"read",p={device:this.device},f={method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify(p)},[4,fetch(l,f)];case 1:return u=y.sent(),[4,u.text()];case 2:return h=y.sent(),[2,h];case 3:throw i=y.sent(),new Error(i);case 4:return[2]}})})},this.print=function(l){return oe(d,void 0,void 0,function(){var p;return se(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),[4,this.write(l)];case 1:return f.sent(),[3,3];case 2:throw p=f.sent(),new Error(p);case 3:return[2]}})})}}return m}(),qe=ar.default=ot;function st({handleClose:m,modalView:d,data:l}){const[p,f]=I.useState([]),[u,h]=I.useState(null);I.useState(!1),I.useState(""),I.useState("");const[i,y]=I.useState(!1),F=Ue({initialValues:(g=>({id:(g==null?void 0:g.id)??"",sala:(g==null?void 0:g.sala)??"",etiqueta:(g==null?void 0:g.etiqueta)??""}))(l),enableReinitialize:!0,onSubmit:async(g,{setSubmitting:j})=>{}});I.useEffect(()=>{new qe().getAvailablePrinters().then(j=>{f(j),j.length>0&&h(j[0])}).catch(j=>{console.error("Erro ao buscar impressoras:",j)})},[]);const w=async()=>{if(!u){alert("Nenhuma impressora Zebra disponível.");return}y(!0);const g=l==null?void 0:l.etiqueta,j=l==null?void 0:l.sala;try{const k=g==null?void 0:g.replace(/^data:image\/png;base64,/,""),X=await(await(await fetch(`data:image/png;base64,${k}`)).blob()).arrayBuffer(),O=or.Buffer.from(X),N=new Blob([O],{type:"image/png"}),D=new FormData;D.append("file",N,"etiqueta.png");const z=(await Fr.post("http://api.labelary.com/v1/graphics",D,{headers:{"Content-Type":"multipart/form-data"},responseType:"text"})).data.replace(/^\^XA/,"").replace(/\^XZ$/,"").replace(/^\^F/,"^FO250,70"),R=`^XA
^FO500,80^GFA,1100,1100,11,J07OFE,I07PFE,001QFC,003QFC,00RF8,01RF,03RF,07QFE,0RFC,:1RF8,1RF,3RF,3QFE,7QFE,7JF8L03FFE,7IFEM03IFC,7IFCM07JF8,7IF8M0KFC,JF8L01LF,JF8L01LF8,JF8L03LFC,JFM07LFE,JF8L07MF,JF8L0NF8,JF8K01NF8,7IF8K01NFC,7IFCK03NFC,7IFEK07NFE,7JF8J07NFE,7OFK0JFE,3NFEK07JF,3NFCK03JF,1NFCK01JF,1NF8K01JF,0NFM0JF,:07LFEM0JF,03LFEM0JF,01LFCM0JF,00LF8L01JF,003KFM01JF,001KFM01JF,I07IFEM03JF,J07FFCM0JFE,M03QFE,M07QFE,M07QFC,M0RFC,M0RF8,L01RF8,L03RF,L03QFE,L07QFC,L0RF8,L0RF,K01QFE,K01QF8,K03PFE,K07OFE,,::::01IFE003JFC0KF8,07JF80KFC1KF8,0KFC1KFC3KF8,1KFE1KFC3KF8,3FC00FE1F8J07E,3FI03F3FK07E,7EI03F1F8J07E,7EI01F9KF83JFE,7EI01F9KFC3KF8,7EI01F8KFC1KF8,7EI01F87JFE0KFC,7EI03FK07EK0FC,3FI07FK03EK0FC,3KFE1KFE3KFC,1KFE1KFE3KFC,0KFC1KFC3KF8,07JF01KF83KF,01IFC01KF03JFE,,:::002L08402,P04,P06,P0602,J02,,001M03,N02,,::::^FS
^FO230,20^A0,50,50^FB400,1,0,C^FD${j}^FS
`+z+"^XZ",G=new qe,C=await G.getDefaultPrinter();G.setPrinter(C);const q=await G.checkPrinterStatus();q.isReadyToPrint?(G.print(R),Je({open:!0,message:"Etiqueta impressa com sucesso!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}})):(Je({open:!0,message:"Erro ao imprimir etiqueta. Verifique se a impressora está conectada e a porta de entrada está aberta.",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"error"}}),console.log("Error/s",q.errors))}catch(k){console.error("Erro ao imprimir etiqueta:",k)}finally{y(!1)}},b=async g=>{for(let j=0;j<g;j++)await w()};return o.jsx(Te,{open:d,keepMounted:!0,onClose:()=>{m()},"aria-describedby":"alert-dialog-slide-description",children:o.jsx(re,{sx:{p:1,py:1.5},children:o.jsx(pe,{children:o.jsx(Pe,{value:F,children:o.jsxs(A,{container:!0,spacing:2.25,children:[o.jsx(A,{item:!0,xs:12,children:o.jsxs(re,{sx:{textAlign:"center"},children:[o.jsx(me,{variant:"h1",gutterBottom:!0,children:F.values.sala}),o.jsx("img",{src:F.values.etiqueta,alt:"",style:{width:"30%"}})]})}),o.jsx(A,{item:!0,xs:12,children:o.jsx(ue,{})}),o.jsx(A,{item:!0,xs:12,children:o.jsx(A,{container:!0,spacing:2,justifyContent:"center",children:o.jsxs(A,{item:!0,children:[o.jsx(v,{variant:"contained",sx:{backgroundColor:"#424242",color:"#fff",marginRight:1,"&:hover":{backgroundColor:"#212121"}},onClick:()=>{w()},disabled:i,className:`print-button ${i?"loading":""}`,children:i?"Imprimindo...":"Imprimir etiqueta da sala"}),o.jsx(v,{variant:"contained",sx:{backgroundColor:"#424242",color:"#fff","&:hover":{backgroundColor:"#212121"}},onClick:()=>{b(5)},disabled:i,className:`print-button ${i?"loading":""}`,children:i?"Imprimindo...":"Imprimir lotes de etiquetas"})]})})}),o.jsx(A,{item:!0,xs:12,children:o.jsx(ge,{children:o.jsx(v,{color:"error",onClick:()=>{m()},children:"Fechar"})})})]})})})})})}const at=m=>({sala:"",polo:"",descricao:"",img:""}),ct=({room:m,closeModal:d})=>{const[l,p]=I.useState(null),[f,u]=I.useState(null),h=I.useRef(null),i=I.useRef(null),[y,x]=I.useState(!1),[F,w]=I.useState(!1),[b,g]=I.useState([]),j=ze().shape({sala:ae().max(255).required("Nome é obrigatorio"),polo:ae().max(255).required("Nome do Polo é obrigatorio"),descricao:ae().max(500)}),k=Ue({initialValues:at(),validationSchema:j,enableReinitialize:!0,onSubmit:async(C,{setSubmitting:q})=>{try{const E=new FormData;if(E.append("sala",String(C.sala)),E.append("poloId",String(C.polo)),E.append("descricao",C.descricao),C.img){const V=await(await fetch(C.img)).blob();E.append("imagem",V,"captured-photo.png")}await le.post("/inventory/rooms",E,{headers:{"Content-Type":"multipart/form-data"}}),q(!1),d()}catch(E){console.error("Error saving data:",E),q(!1)}}}),{errors:K,touched:_,handleSubmit:X,isSubmitting:O,getFieldProps:N,setFieldValue:D}=k,Y=async()=>{try{w(!0);const C=await navigator.mediaDevices.getUserMedia({video:!0});setTimeout(async()=>{p(C),h.current&&(h.current.srcObject=C,await h.current.play()),w(!1)},500),x(!0)}catch(C){console.error("Error accessing camera:",C),w(!1)}},J=()=>{l&&(l.getTracks().forEach(C=>{C.stop()}),p(null)),x(!1)},z=async()=>{if(h.current&&i.current){const C=i.current.getContext("2d");if(C){i.current.width=h.current.videoWidth,i.current.height=h.current.videoHeight,C.drawImage(h.current,0,0);const q=i.current.toDataURL("image/png");await D("img",q),J()}}},R=()=>{u(null)},G=async()=>{try{const C=await le.get("/inventory/polo/details");g(C.data.polos)}catch(C){console.error("Error fetching data:",C)}};return I.useEffect(()=>{G()},[]),o.jsx(Pe,{value:k,children:o.jsx(tr,{dateAdapter:nr,children:o.jsxs(Ge,{autoComplete:"off",noValidate:!0,onSubmit:X,children:[o.jsx(He,{children:"Nova Sala"}),o.jsx(ue,{}),o.jsx(pe,{sx:{p:2.5},children:o.jsx(A,{container:!0,spacing:3,children:o.jsx(A,{item:!0,xs:12,children:o.jsxs(A,{container:!0,spacing:3,children:[o.jsx(A,{item:!0,xs:12,sm:6,children:o.jsxs(U,{spacing:1,children:[o.jsx(ce,{htmlFor:"sala",children:"Nome da Sala"}),o.jsx(xe,{fullWidth:!0,id:"sala",placeholder:"Nome",...N("sala"),error:!!(_.sala&&K.sala),helperText:o.jsx(o.Fragment,{children:_.sala&&K.sala})})]})}),o.jsx(A,{item:!0,xs:12,sm:4,children:o.jsxs(U,{spacing:1,children:[o.jsx(ce,{htmlFor:"polo",children:"Polo"}),o.jsxs(Qe,{fullWidth:!0,error:!!(_.polo&&K.polo),children:[o.jsx(Xe,{id:"polo",placeholder:"Nome",...N("polo"),value:k.values.polo,children:b.map(C=>o.jsx(Ye,{value:C.id,children:C.polo},"polo_"+C.id))}),_.polo&&K.polo&&o.jsx(Ze,{children:typeof K.polo})]})]})}),o.jsx(A,{item:!0,xs:12,children:o.jsxs(U,{spacing:1,children:[o.jsx(ce,{htmlFor:"descricao",children:"Descrição"}),o.jsx(xe,{fullWidth:!0,id:"descricao",multiline:!0,minRows:2,placeholder:"Descrição",...N("descricao"),error:!!(_.descricao&&K.descricao),helperText:o.jsx(o.Fragment,{children:_.descricao&&K.descricao})})]})}),o.jsx(A,{item:!0,xs:12,children:o.jsxs(U,{spacing:1,alignItems:"center",children:[F&&o.jsx(A,{item:!0,xs:4,children:o.jsx(re,{style:{display:"flex",width:"20%",height:"auto",marginTop:20,justifyContent:"center",alignItems:"center"},children:o.jsx(ir,{})})}),!y&&!k.values.img&&!F&&o.jsx(v,{variant:"contained",onClick:Y,children:"Abrir Câmera"}),y&&o.jsxs(o.Fragment,{children:[o.jsx("video",{ref:h,style:{width:"20%",height:"auto",marginTop:20}}),o.jsx("canvas",{ref:i,style:{display:"none"}}),o.jsxs(U,{direction:"row",spacing:2,style:{marginTop:20},children:[o.jsx(v,{variant:"outlined",color:"error",onClick:J,children:"Cancelar"}),o.jsx(v,{variant:"contained",onClick:z,children:"Tirar Foto"})]})]}),k.values.img&&o.jsxs(U,{spacing:2,style:{marginTop:20,alignItems:"center"},children:[o.jsx("img",{src:k.values.img,alt:"Captured",style:{width:"20%",height:"auto"}}),o.jsx(v,{variant:"outlined",color:"error",onClick:R,children:"Remover Foto"})]})]})})]})})})}),o.jsx(ue,{}),o.jsx(ge,{sx:{p:2.5},children:o.jsx(A,{container:!0,justifyContent:"space-between",alignItems:"center",children:o.jsx(A,{item:!0,children:o.jsxs(U,{direction:"row",spacing:2,alignItems:"center",children:[o.jsx(v,{color:"error",onClick:d,children:"Cancelar"}),o.jsx(v,{type:"submit",variant:"contained",disabled:O,children:"Cadastrar"})]})})})})]})})})},lt=({openModalCreate:m,modalToggler:d,room:l})=>{const p=()=>{d(!1)},f=l?o.jsx(re,{sx:{p:5},children:o.jsx(U,{direction:"row",justifyContent:"center",children:o.jsx(Wr,{})})}):o.jsx(ct,{room:l||null,closeModal:p});return o.jsx(Er,{open:m,onClose:p,"aria-labelledby":"modal-room-add-label","aria-describedby":"modal-room-add-description",sx:{"& .MuiPaper-root:focus":{outline:"none"}},children:o.jsx(er,{sx:{width:"calc(100% - 48px)",minWidth:340,maxWidth:880,height:"auto",maxHeight:"calc(100vh - 48px)"},modal:!0,content:!1,children:o.jsx(Ir,{sx:{maxHeight:"calc(100vh - 48px)","& .simplebar-content":{display:"flex",flexDirection:"column"}},children:f})})})},ut=(m,d,l,p)=>{const f=$r(m.getValue(d),l);return p(f),f.passed};function ht({data:m,columns:d,modalToggler:l}){const p=rr(),f=Br(p.breakpoints.down("sm")),[u,h]=I.useState([{id:"id",desc:!0}]),[i,y]=I.useState({}),[x,F]=I.useState(""),w=jr({data:m,columns:d,state:{sorting:u,rowSelection:i,globalFilter:x},enableRowSelection:!0,onSortingChange:h,onRowSelectionChange:y,onGlobalFilterChange:F,getRowCanExpand:()=>!0,getSortedRowModel:Mr(),getFilteredRowModel:kr(),getCoreRowModel:Dr(),getPaginationRowModel:Lr(),getExpandedRowModel:vr(),globalFilterFn:ut,debugTable:!0});return o.jsxs(er,{content:!1,children:[o.jsxs(U,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:2,...f&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[o.jsx(Cr,{value:x??"",onFilterChange:b=>{F(String(b))},placeholder:`Search ${m.length} records...`}),o.jsxs(U,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:[o.jsx(zr,{getState:w.getState,getAllColumns:w.getAllColumns,setSorting:h}),o.jsx(U,{direction:"row",spacing:2,alignItems:"center",children:o.jsx(v,{variant:"contained",startIcon:o.jsx(Kr,{}),onClick:l,children:"Adicionar Sala"})})]})]}),o.jsx(br,{children:o.jsxs(U,{children:[o.jsx(Or,{selected:Object.keys(i).length}),o.jsx(Sr,{children:o.jsxs(Rr,{children:[o.jsx(Ar,{children:w.getHeaderGroups().map(b=>o.jsx(Ce,{children:b.headers.map(g=>(g.column.columnDef.meta!==void 0&&g.column.getCanSort()&&Object.assign(g.column.columnDef.meta,{className:g.column.columnDef.meta.className+" cursor-pointer prevent-select"}),o.jsx(be,{...g.column.columnDef.meta,onClick:g.column.getToggleSortingHandler(),...g.column.getCanSort()&&g.column.columnDef.meta===void 0&&{className:"cursor-pointer prevent-select"},children:g.isPlaceholder?null:o.jsxs(U,{direction:"row",spacing:1,alignItems:"center",children:[o.jsx(re,{children:Ve(g.column.columnDef.header,g.getContext())}),g.column.getCanSort()&&o.jsx(Gr,{column:g.column})]})},g.id)))},b.id))}),o.jsx(Tr,{children:w.getRowModel().rows.length===0?o.jsx(Ce,{children:o.jsx(be,{colSpan:d.length,align:"center",children:o.jsx(Ur,{msg:"Nenhum registro encontrado"})})}):w.getRowModel().rows.map(b=>o.jsx(I.Fragment,{children:o.jsx(Ce,{children:b.getVisibleCells().map(g=>o.jsx(be,{...g.column.columnDef.meta,children:Ve(g.column.columnDef.cell,g.getContext())},g.id))})},b.id))})]})}),o.jsxs(o.Fragment,{children:[o.jsx(ue,{}),o.jsx(re,{sx:{p:2},children:o.jsx(Pr,{setPageSize:w.setPageSize,setPageIndex:w.setPageIndex,getState:w.getState,getPageCount:w.getPageCount})})]})]})})]})}function yt(){const m=rr(),[d,l]=I.useState(!1),[p,f]=I.useState(!1),[u,h]=I.useState(!1),[i,y]=I.useState(!1),[x,F]=I.useState(!1),[w,b]=I.useState(null),[g,j]=I.useState(""),[k,K]=I.useState(""),[_,X]=I.useState([]),O=async()=>{try{const R=await le.get("/inventory/rooms");X(R.data.salas.rows)}catch(R){console.error("Erro ao buscar dados:",R)}};I.useEffect(()=>{O()},[i,g,k,p,w]);const N=()=>{l(!d)},D=()=>{y(!0)},Y=()=>{F(!0)},J=()=>{f(!p)},z=I.useMemo(()=>[{id:"select",header:({table:R})=>o.jsx(We,{checked:R.getIsAllRowsSelected(),indeterminate:R.getIsSomeRowsSelected(),onChange:R.getToggleAllRowsSelectedHandler()}),cell:({row:R})=>o.jsx(We,{checked:R.getIsSelected(),disabled:!R.getCanSelect(),indeterminate:R.getIsSomeSelected(),onChange:R.getToggleSelectedHandler()}),meta:{className:"p-0"}},{accessorKey:"sala",header:"Sala"},{accessorKey:"polo.polo",header:"polo"},{accessorKey:"descricao",header:"Descrição"},{id:"actions",header:"Ações",cell:({row:R})=>o.jsxs(U,{direction:"row",spacing:1,children:[o.jsx(Se,{title:"Vizualizar qrCode",children:o.jsx(Re,{color:"primary",onClick:()=>{b(R.original),Y()},children:o.jsx(Nr,{})})}),o.jsx(Se,{title:"Editar",children:o.jsx(Re,{color:"primary",onClick:()=>{b(R.original),D()},children:o.jsx(qr,{})})}),o.jsx(Se,{title:"Excluir",children:o.jsx(Re,{color:"error",onClick:()=>{j(R.original.id),l(!0),K(R.original.sala)},children:o.jsx(Jr,{})})})]})}],[m]);return o.jsxs(o.Fragment,{children:[o.jsx(ht,{data:_,columns:z,modalToggler:()=>{h(!0),b(null),J()}}),o.jsx(Hr,{id:g,title:g,open:d,handleClose:N,name:k}),o.jsx(lt,{openModalCreate:p,modalToggler:J}),o.jsx(Qr,{modalEdit:i,handleClose:y,data:w}),o.jsx(st,{modalView:x,handleClose:F,data:w})]})}export{yt as default};
