import{v as te,t as ne,w as L,aK as D,_ as I,r as f,x as se,y as ie,aL as _e,aM as ye,T as H,j as e,C as Z,S as m,D as le,aN as ee,aO as Fe,aP as Pe,a3 as ce,a4 as ke,a5 as U,a6 as Te,h as N,k as z,c as de,a as g,aQ as me,a8 as ue,B as X,a9 as he,aa as pe,ab as xe,ac as J,G as u,I as p,ad as C,p as O,af as W,ag as a,b as q,ae as ge,ah as Re,M as je,ai as Be,n as fe,J as Me,K as Ee,at as $e,aj as Ae,Q as De,U as Ie,W as Ne,X as Oe,Y as Q,Z as Y,$ as oe,a0 as We,ak as qe,al as ze,P as Le,am as Ge,N as Ve,an as He,ao as Je,aA as G,ap as K,aq as re}from"./index-7e03851a.js";import{D as Ke,P as Ue,R as Xe,r as Qe,I as ae,a as Ye}from"./index-21af74f7.js";import{I as A}from"./index-612f1b59.js";import{L as ve,A as be,C as Ze,E as eo}from"./CircularWithPath-97670017.js";import{a as oo,S as ro,H as ao}from"./SelectColumnSorting-45b46ef7.js";function to(o){return ne("MuiFormControlLabel",o)}const no=te("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),V=no,so=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],io=o=>{const{classes:n,disabled:r,labelPlacement:x,error:v,required:w}=o,P={root:["root",r&&"disabled",`labelPlacement${D(x)}`,v&&"error",w&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",v&&"error"]};return le(P,to,n)},lo=L("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(o,n)=>{const{ownerState:r}=o;return[{[`& .${V.label}`]:n.label},n.root,n[`labelPlacement${D(r.labelPlacement)}`]]}})(({theme:o,ownerState:n})=>I({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${V.disabled}`]:{cursor:"default"}},n.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},n.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},n.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${V.label}`]:{[`&.${V.disabled}`]:{color:(o.vars||o).palette.text.disabled}}})),co=L("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(o,n)=>n.asterisk})(({theme:o})=>({[`&.${V.error}`]:{color:(o.vars||o).palette.error.main}})),mo=f.forwardRef(function(n,r){var x,v;const w=se({props:n,name:"MuiFormControlLabel"}),{className:P,componentsProps:k={},control:y,disabled:F,disableTypography:l,label:t,labelPlacement:c="end",required:s,slotProps:b={}}=w,B=ie(w,so),j=_e(),R=(x=F??y.props.disabled)!=null?x:j==null?void 0:j.disabled,$=s??y.props.required,h={disabled:R,required:$};["checked","name","onChange","value","inputRef"].forEach(E=>{typeof y.props[E]>"u"&&typeof w[E]<"u"&&(h[E]=w[E])});const S=ye({props:w,muiFormControl:j,states:["error"]}),i=I({},w,{disabled:R,labelPlacement:c,required:$,error:S.error}),d=io(i),M=(v=b.typography)!=null?v:k.typography;let _=t;return _!=null&&_.type!==H&&!l&&(_=e.jsx(H,I({component:"span"},M,{className:Z(d.label,M==null?void 0:M.className),children:_}))),e.jsxs(lo,I({className:Z(d.root,P),ownerState:i,ref:r},B,{children:[f.cloneElement(y,h),$?e.jsxs(m,{display:"block",children:[_,e.jsxs(co,{ownerState:i,"aria-hidden":!0,className:d.asterisk,children:[" ","*"]})]}):_]}))}),Ce=mo;function uo(o){return ne("MuiSwitch",o)}const ho=te("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),T=ho,po=["className","color","edge","size","sx"],xo=o=>{const{classes:n,edge:r,size:x,color:v,checked:w,disabled:P}=o,k={root:["root",r&&`edge${D(r)}`,`size${D(x)}`],switchBase:["switchBase",`color${D(v)}`,w&&"checked",P&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},y=le(k,uo,n);return I({},n,y)},go=L("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(o,n)=>{const{ownerState:r}=o;return[n.root,r.edge&&n[`edge${D(r.edge)}`],n[`size${D(r.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${T.thumb}`]:{width:16,height:16},[`& .${T.switchBase}`]:{padding:4,[`&.${T.checked}`]:{transform:"translateX(16px)"}}}}]}),jo=L(oo,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(o,n)=>{const{ownerState:r}=o;return[n.switchBase,{[`& .${T.input}`]:n.input},r.color!=="default"&&n[`color${D(r.color)}`]]}})(({theme:o})=>({position:"absolute",top:0,left:0,zIndex:1,color:o.vars?o.vars.palette.Switch.defaultColor:`${o.palette.mode==="light"?o.palette.common.white:o.palette.grey[300]}`,transition:o.transitions.create(["left","transform"],{duration:o.transitions.duration.shortest}),[`&.${T.checked}`]:{transform:"translateX(20px)"},[`&.${T.disabled}`]:{color:o.vars?o.vars.palette.Switch.defaultDisabledColor:`${o.palette.mode==="light"?o.palette.grey[100]:o.palette.grey[600]}`},[`&.${T.checked} + .${T.track}`]:{opacity:.5},[`&.${T.disabled} + .${T.track}`]:{opacity:o.vars?o.vars.opacity.switchTrackDisabled:`${o.palette.mode==="light"?.12:.2}`},[`& .${T.input}`]:{left:"-100%",width:"300%"}}),({theme:o})=>({"&:hover":{backgroundColor:o.vars?`rgba(${o.vars.palette.action.activeChannel} / ${o.vars.palette.action.hoverOpacity})`:ee(o.palette.action.active,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(o.palette).filter(([,n])=>n.main&&n.light).map(([n])=>({props:{color:n},style:{[`&.${T.checked}`]:{color:(o.vars||o).palette[n].main,"&:hover":{backgroundColor:o.vars?`rgba(${o.vars.palette[n].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:ee(o.palette[n].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${T.disabled}`]:{color:o.vars?o.vars.palette.Switch[`${n}DisabledColor`]:`${o.palette.mode==="light"?Fe(o.palette[n].main,.62):Pe(o.palette[n].main,.55)}`}},[`&.${T.checked} + .${T.track}`]:{backgroundColor:(o.vars||o).palette[n].main}}}))]})),fo=L("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(o,n)=>n.track})(({theme:o})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:o.transitions.create(["opacity","background-color"],{duration:o.transitions.duration.shortest}),backgroundColor:o.vars?o.vars.palette.common.onBackground:`${o.palette.mode==="light"?o.palette.common.black:o.palette.common.white}`,opacity:o.vars?o.vars.opacity.switchTrack:`${o.palette.mode==="light"?.38:.3}`})),vo=L("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(o,n)=>n.thumb})(({theme:o})=>({boxShadow:(o.vars||o).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),bo=f.forwardRef(function(n,r){const x=se({props:n,name:"MuiSwitch"}),{className:v,color:w="primary",edge:P=!1,size:k="medium",sx:y}=x,F=ie(x,po),l=I({},x,{color:w,edge:P,size:k}),t=xo(l),c=e.jsx(vo,{className:t.thumb,ownerState:l});return e.jsxs(go,{className:Z(t.root,v),sx:y,ownerState:l,children:[e.jsx(jo,I({type:"checkbox",icon:c,checkedIcon:c,ref:r,ownerState:l},F,{classes:I({},t,{root:t.switchBase})})),e.jsx(fo,{className:t.track,ownerState:l})]})}),Se=bo;function Co({id:o,title:n,open:r,handleClose:x,name:v}){const w=async k=>{try{await z.delete(`/inventory/suppliers/${k}`)}catch(y){throw console.error("Erro ao deletar o polo:",y),y}},P=async()=>{try{await w(o),x(),window.location.reload()}catch{}};return e.jsx(ce,{open:r,onClose:x,keepMounted:!0,TransitionComponent:ke,maxWidth:"xs","aria-labelledby":"column-delete-title","aria-describedby":"column-delete-description",children:e.jsx(U,{sx:{mt:2,my:1},children:e.jsxs(m,{alignItems:"center",spacing:3.5,children:[e.jsx(Te,{color:"error",sx:{width:72,height:72,fontSize:"1.75rem"},children:e.jsx(Ke,{})}),e.jsxs(m,{spacing:2,children:[e.jsx(H,{variant:"h4",align:"center",children:"Você tem certeza?"}),e.jsxs(H,{align:"center",children:["Você está deletando o departamento",e.jsx(H,{variant:"subtitle1",component:"span",sx:{ml:.5},children:v}),", esta operação não pode ser desfeita."]})]}),e.jsxs(m,{direction:"row",spacing:2,sx:{width:1},children:[e.jsx(N,{fullWidth:!0,onClick:x,color:"secondary",variant:"outlined",children:"Cancelar"}),e.jsx(N,{fullWidth:!0,color:"error",variant:"contained",onClick:P,autoFocus:!0,children:"Deletar"})]})]})})})}function So({handleClose:o,modalEdit:n,data:r}){const[x,v]=f.useState(!0),[w,P]=f.useState([]),[k,y]=f.useState({}),F=i=>({nome:(r==null?void 0:r.nome)||"",cnpj:(r==null?void 0:r.cnpj)||"",inscricao_estadual:(r==null?void 0:r.inscricao_estadual)||"",rua:(r==null?void 0:r.rua)||"",numero:(r==null?void 0:r.numero)||"",complemento:(r==null?void 0:r.complemento)||"",bairro:(r==null?void 0:r.bairro)||"",cep:(r==null?void 0:r.cep)||"",cidade:(r==null?void 0:r.cidade)||"",estado:(r==null?void 0:r.estado)||"",email:(r==null?void 0:r.email)||"",telefone:(r==null?void 0:r.telefone)||"",nome_contato:(r==null?void 0:r.nome_contato)||"",telefone_contato:(r==null?void 0:r.telefone_contato)||"",email_contato:(r==null?void 0:r.email_contato)||"",categoria:(r==null?void 0:r.categoria.id)||"",condicoes_pagamento:(r==null?void 0:r.condicoes_pagamento.split(","))||[],status:(r==null?void 0:r.status)||""}),l=de().shape({nome:g().required("O nome do fornecedor deve ser informado"),cnpj:g().required("O CNPJ do fornecedor deve ser informado"),inscricao_estadual:g(),rua:g().required("O logradouro deve ser informado"),bairro:g().required("O bairro deve ser informado"),cep:g().required("O CEP deve ser informado"),estado:g().required("O estado deve ser informado"),cidade:g().required("A cidade deve ser informada"),email:g().email("Formato de e-mail inválido").required("O email deve ser informado"),telefone:g().required("O telefone deve ser informado"),nome_contato:g().required("O nome do contato deve ser informado"),telefone_contato:g().required("O telefone do contato deve ser informado"),email_contato:g().required("O email do contato deve ser informado").email("Formato de e-mail inválido"),categoria:g().required("A categoria do fornecedor deve ser informada"),condicoes_pagamento:me().min(1,"Pelo menos uma condição de pagamento deve ser selecionada").required("As condições de pagamento devem ser informadas")}),t=ue({initialValues:F(),validationSchema:l,enableReinitialize:!0,onSubmit:async(i,{setSubmitting:d,resetForm:M})=>{try{(await z.put(`/inventory/suppliers/${r.id}`,{nome:i.nome,cnpj:i.cnpj.replace(/\D/g,""),inscricao_estadual:i.inscricao_estadual,rua:i.rua,numero:i.numero,complemento:i.complemento,bairro:i.bairro,cep:i.cep.replace(/\D/g,""),estado:i.estado,cidade:i.cidade,email:i.email,nome_contato:i.nome_contato,email_contato:i.email_contato,telefone_contato:i.telefone_contato.replace(/\D/g,""),condicoes_pagamento:i.condicoes_pagamento.join(","),status:i.status,categoriaId:i.categoria,telefone:i.telefone.replace(/\D/g,""),departamentoId:i.departamento,descricao:i.descricao})).data.success===!0&&(M(),o())}catch(_){console.error(_)}}}),{errors:c,touched:s,handleSubmit:b,isSubmitting:B,getFieldProps:j,setFieldValue:R}=t,$=async i=>{try{const d=await fetch(`https://brasilapi.com.br/api/cep/v2/${i}`);if(!d.ok)throw new Error("Não foi possível encontrar o CEP");return await d.json()}catch(d){return console.error(d),null}},h=async i=>{const{value:d}=i.target;await R("cep",d);const M=d.replace(/\D/g,"");if(M.length===8){const _=await $(M);_&&(y(_),await R("logradouro",_.street),await R("bairro",_.neighborhood),await R("cidade",_.city),await R("estado",_.state))}},S=async()=>{try{const i=await z.get("/inventory/categories/");P(i.data.categorias.rows)}catch(i){console.error("Error fetching categorias:",i)}finally{v(!1)}};return f.useEffect(()=>{S()},[]),e.jsx("div",{children:e.jsx(ce,{open:n,keepMounted:!0,onClose:()=>{o()},"aria-describedby":"alert-dialog-slide-description",maxWidth:"md",children:e.jsx(X,{sx:{p:1,py:1.5},children:e.jsx(U,{children:e.jsx(he,{value:t,children:e.jsx(ve,{dateAdapter:be,children:e.jsxs(pe,{autoComplete:"off",noValidate:!0,onSubmit:b,children:[e.jsx(xe,{children:"Novo fornecedor"}),e.jsx(J,{}),e.jsx(U,{sx:{p:2.5},children:e.jsx(u,{container:!0,spacing:3,children:e.jsx(u,{item:!0,xs:12,children:e.jsxs(u,{container:!0,spacing:3,children:[e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"nome",children:"Nome do fornecedor"}),e.jsx(C,{fullWidth:!0,id:"nome",placeholder:"Nome",...j("nome"),error:!!(s.nome&&c.nome),helperText:e.jsx(e.Fragment,{children:s.nome&&c.nome})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"cnpj",children:"CNPJ"}),e.jsx(A,{mask:"99.999.999/9999-99",value:j("cnpj").value,onChange:j("cnpj").onChange,children:()=>e.jsx(C,{fullWidth:!0,id:"cnpj",placeholder:"CNPJ",error:!!(s.cnpj&&c.cnpj),helperText:e.jsx(e.Fragment,{children:s.cnpj&&c.cnpj})})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"inscricao_estadual",children:"Inscrição Estadual"}),e.jsx(C,{fullWidth:!0,id:"inscricao_estadual",placeholder:"Inscrição Estadual",...j("inscricao_estadual"),error:!!(s.inscricao_estadual&&c.inscricao_estadual),helperText:e.jsx(e.Fragment,{children:s.inscricao_estadual&&c.inscricao_estadual})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"cep",children:"CEP"}),e.jsx(A,{mask:"99999-999",value:j("cep").value,onChange:()=>h,children:()=>e.jsx(C,{fullWidth:!0,id:"cep",placeholder:"CEP",error:!!(s.cep&&c.cep),helperText:e.jsx(e.Fragment,{children:s.cep&&c.cep})})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"rua",children:"Endereço"}),e.jsx(C,{fullWidth:!0,id:"rua",placeholder:"Endereço",...j("rua"),error:!!(s.rua&&c.rua),helperText:e.jsx(e.Fragment,{children:s.rua&&c.rua})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"bairro",children:"Bairro"}),e.jsx(C,{fullWidth:!0,id:"bairro",placeholder:"Bairro",...j("bairro"),error:!!(s.bairro&&c.bairro),helperText:e.jsx(e.Fragment,{children:s.bairro&&c.bairro})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"cidade",children:"Cidade"}),e.jsx(C,{fullWidth:!0,id:"cidade",placeholder:"Cidade",...j("cidade"),error:!!(s.cidade&&c.cidade),helperText:e.jsx(e.Fragment,{children:s.cidade&&c.cidade})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"estado",children:"Estado"}),e.jsxs(O,{fullWidth:!0,error:!!(s.estado&&c.estado),children:[e.jsxs(W,{id:"estado",...j("estado"),onChange:async i=>await R("estado",i.target.value),value:t.values.estado||"",displayEmpty:!0,children:[e.jsx(a,{value:"",children:"Selecione"}),e.jsx(a,{value:"AC",children:"Acre"}),e.jsx(a,{value:"AL",children:"Alagoas"}),e.jsx(a,{value:"AP",children:"Amapá"}),e.jsx(a,{value:"AM",children:"Amazonas"}),e.jsx(a,{value:"BA",children:"Bahia"}),e.jsx(a,{value:"CE",children:"Ceará"}),e.jsx(a,{value:"DF",children:"Distrito Federal"}),e.jsx(a,{value:"ES",children:"Espírito Santo"}),e.jsx(a,{value:"GO",children:"Goiás"}),e.jsx(a,{value:"MA",children:"Maranhão"}),e.jsx(a,{value:"MT",children:"Mato Grosso"}),e.jsx(a,{value:"MS",children:"Mato Grosso do Sul"}),e.jsx(a,{value:"MG",children:"Minas Gerais"}),e.jsx(a,{value:"PA",children:"Pará"}),e.jsx(a,{value:"PB",children:"Paraíba"}),e.jsx(a,{value:"PR",children:"Paraná"}),e.jsx(a,{value:"PE",children:"Pernambuco"}),e.jsx(a,{value:"PI",children:"Piauí"}),e.jsx(a,{value:"RJ",children:"Rio de Janeiro"}),e.jsx(a,{value:"RN",children:"Rio Grande do Norte"}),e.jsx(a,{value:"RS",children:"Rio Grande do Sul"}),e.jsx(a,{value:"RO",children:"Rondônia"}),e.jsx(a,{value:"RR",children:"Roraima"}),e.jsx(a,{value:"SC",children:"Santa Catarina"}),e.jsx(a,{value:"SP",children:"São Paulo"}),e.jsx(a,{value:"SE",children:"Sergipe"}),e.jsx(a,{value:"TO",children:"Tocantins"})]}),e.jsx(q,{children:e.jsx(e.Fragment,{children:s.estado&&c.estado})})]})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"email",children:"Email"}),e.jsx(C,{fullWidth:!0,id:"email",placeholder:"Email",...j("email"),error:!!(s.email&&c.email),helperText:e.jsx(e.Fragment,{children:s.email&&c.email}),type:"email"})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"telefone",children:"Telefone"}),e.jsx(A,{mask:"(99) 99999-9999",value:j("telefone").value,onChange:j("telefone").onChange,children:()=>e.jsx(C,{fullWidth:!0,id:"telefone",placeholder:"Telefone",error:!!(s.telefone&&c.telefone),helperText:e.jsx(e.Fragment,{children:s.telefone&&c.telefone})})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"nome_contato",children:"Nome do contato"}),e.jsx(C,{fullWidth:!0,id:"nome_contato",placeholder:"Nome do contato",...j("nome_contato"),error:!!(s.nome_contato&&c.nome_contato),helperText:e.jsx(e.Fragment,{children:s.nome_contato&&c.nome_contato})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"email_contato",children:"Email do contato"}),e.jsx(C,{fullWidth:!0,id:"email_contato",placeholder:"Email",...j("email_contato"),error:!!(s.email_contato&&c.email_contato),helperText:e.jsx(e.Fragment,{children:s.email_contato&&c.email_contato}),type:"email"})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"telefone_contato",children:"Telefone do contato"}),e.jsx(A,{mask:"(99) 99999-9999",value:j("telefone_contato").value,onChange:j("telefone_contato").onChange,children:()=>e.jsx(C,{fullWidth:!0,id:"telefone_contato",placeholder:"Telefone",error:!!(s.telefone_contato&&c.telefone_contato),helperText:e.jsx(e.Fragment,{children:s.telefone_contato&&c.telefone_contato})})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"categoria",children:"Categoria"}),e.jsxs(O,{fullWidth:!0,error:!!(s.name&&c.name),children:[e.jsx(W,{id:"categoria",placeholder:"Nome",...j("categoria"),value:t.values.categoria,children:w.map(i=>e.jsx(a,{value:i.id,children:i.categoria},"ct_"+i.id))}),s.categoria&&c.categoria&&e.jsx(q,{children:typeof c.categoria})]})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"condicoes_pagamento",children:"Condições de pagamento"}),e.jsxs(O,{fullWidth:!0,error:!!(t.touched.condicoes_pagamento&&t.errors.condicoes_pagamento),children:[e.jsxs(W,{id:"condicoes_pagamento",...t.getFieldProps("condicoes_pagamento"),value:t.values.condicoes_pagamento,multiple:!0,onChange:i=>{const{target:{value:d}}=i;t.setFieldValue("condicoes_pagamento",typeof d=="string"?d.split(","):d)},children:[e.jsx(a,{value:"Pix",children:"Pix"}),e.jsx(a,{value:"Cartão de crédito",children:"Cartão de crédito"}),e.jsx(a,{value:"Boleto",children:"Boleto"})]}),e.jsx(q,{children:e.jsx(e.Fragment,{children:s.condicoes_pagamento&&c.condicoes_pagamento})})]})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsx(m,{spacing:1,direction:"row",alignItems:"center",children:e.jsx(Ce,{control:e.jsx(Se,{checked:t.values.status,onChange:async i=>await R("status",i.target.checked),name:"status"}),label:"Ativar ou desativar fornecedor"})})})]})})})}),e.jsx(J,{}),e.jsx(ge,{sx:{p:2.5},children:e.jsx(u,{container:!0,alignItems:"center",display:{justifyContent:"flex-end"},children:e.jsx(u,{item:!0,children:e.jsxs(m,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(N,{color:"error",onClick:o,children:"Cancelar"}),e.jsx(N,{type:"submit",variant:"contained",disabled:B,children:"Cadastrar"})]})})})})]})})})})})})})}const wo=o=>({nome:"",cnpj:"",inscricao_estadual:"",rua:"",numero:"",complemento:"",bairro:"",cep:"",cidade:"",uf:"",email:"",telefone:"",nome_contato:"",telefone_contato:"",email_contato:"",categoria:"",condicoes_pagamento:[],status:!1}),_o=({supplier:o,closeModal:n})=>{const[r,x]=f.useState(!1),[v,w]=f.useState([]),[P,k]=f.useState({}),y=de().shape({nome:g().required("O nome do fornecedor deve ser informado"),cnpj:g().required("O CNPJ do fornecedor deve ser informado"),inscricao_estadual:g().max(9),rua:g().required("O logradouro do fornecedor deve ser informado"),bairro:g().required("O bairro do fornecedor deve ser informado"),cep:g().required("O CEP do fornecedor deve ser informado"),estado:g().required("O estado do fornecedor deve ser informado"),cidade:g().required("A cidade do fornecedor deve ser informada"),email:g().email("Formato de e-mail inválido").required("O email do fornecedor deve ser informado"),telefone:g().test("minimo-8-digitos","O telefone deve ter no mínimo 8 números",h=>{const S=h==null?void 0:h.replace(/\D/g,"");return S&&S.length>=10}).required("Telefone é obrigatório"),nome_contato:g().required("O nome do contato do fornecedor deve ser informado"),telefone_contato:g().test("minimo-8-digitos","O telefone deve ter no mínimo 8 números",h=>{const S=h==null?void 0:h.replace(/\D/g,"");return S&&S.length>=10}).required("O telefone do contato do fornecedor deve ser informado"),email_contato:g().required("O email do contato do fornecedor deve ser informado").email("Formato de e-mail inválido"),categoria:g().required("A categoria do fornecedor deve ser informada"),condicoes_pagamento:me().min(1,"Pelo menos uma condição de pagamento deve ser selecionada").required("As condições de pagamento devem ser informadas")}),F=ue({initialValues:wo(),validationSchema:y,enableReinitialize:!0,onSubmit:async(h,{setSubmitting:S})=>{try{const{categoria:i,...d}=h,M=await z.post("/inventory/suppliers",{...d,categoriaId:h.categoria,telefone:h.telefone.replace(/\D/g,""),telefone_contato:h.telefone_contato.replace(/\D/g,""),condicoes_pagamento:h.condicoes_pagamento.join(",")});S(!1),n()}catch(i){console.error(i)}}}),{errors:l,touched:t,handleSubmit:c,isSubmitting:s,getFieldProps:b,setFieldValue:B}=F,j=async h=>{try{const S=await fetch(`https://brasilapi.com.br/api/cep/v2/${h}`);if(!S.ok)throw new Error("Não foi possível encontrar o CEP");return await S.json()}catch(S){return console.error(S),null}},R=async h=>{const{value:S}=h.target;await B("cep",S);const i=S.replace(/\D/g,"");if(i.length===8){const d=await j(i);d&&(k(d),await B("rua",d.street),await B("bairro",d.neighborhood),await B("cidade",d.city),await B("estado",d.state))}},$=async()=>{try{const h=await z.get("/inventory/categories/");w(h.data.categorias.rows)}catch(h){console.error("Error fetching categorias:",h)}finally{x(!1)}};return f.useEffect(()=>{$()},[]),e.jsx(he,{value:F,children:e.jsx(ve,{dateAdapter:be,children:e.jsxs(pe,{autoComplete:"off",noValidate:!0,onSubmit:c,children:[e.jsx(xe,{children:"Novo fornecedor"}),e.jsx(J,{}),e.jsx(U,{sx:{p:2.5},children:e.jsx(u,{container:!0,spacing:3,children:e.jsx(u,{item:!0,xs:12,children:e.jsxs(u,{container:!0,spacing:3,children:[e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"nome",children:"Nome do fornecedor"}),e.jsx(C,{fullWidth:!0,id:"nome",placeholder:"Nome",...b("nome"),error:!!(t.nome&&l.nome),helperText:e.jsx(e.Fragment,{children:t.nome&&l.nome})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"cnpj",children:"CNPJ"}),e.jsx(A,{mask:"99.999.999/9999-99",value:b("cnpj").value,onChange:b("cnpj").onChange,children:()=>e.jsx(C,{fullWidth:!0,id:"cnpj",placeholder:"CNPJ",error:!!(t.cnpj&&l.cnpj),helperText:e.jsx(e.Fragment,{children:t.cnpj&&l.cnpj})})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"inscricao_estadual",children:"Inscrição Estadual"}),e.jsx(C,{fullWidth:!0,id:"inscricao_estadual",type:"number",placeholder:"Inscrição Estadual",...b("inscricao_estadual"),error:!!(t.inscricao_estadual&&l.inscricao_estadual),helperText:e.jsx(e.Fragment,{children:t.inscricao_estadual&&l.inscricao_estadual})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"cep",children:"CEP"}),e.jsx(A,{mask:"99999-999",value:b("cep").value,onChange:R,children:()=>e.jsx(C,{fullWidth:!0,id:"cep",placeholder:"CEP",error:!!(t.cep&&l.cep),helperText:e.jsx(e.Fragment,{children:t.cep&&l.cep})})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"rua",children:"Endereço"}),e.jsx(C,{fullWidth:!0,id:"rua",placeholder:"Endereço",...b("rua"),error:!!(t.rua&&l.rua),helperText:e.jsx(e.Fragment,{children:t.rua&&l.rua})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"bairro",children:"Bairro"}),e.jsx(C,{fullWidth:!0,id:"bairro",placeholder:"Bairro",...b("bairro"),error:!!(t.bairro&&l.bairro),helperText:e.jsx(e.Fragment,{children:t.bairro&&l.bairro})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"cidade",children:"Cidade"}),e.jsx(C,{fullWidth:!0,id:"cidade",placeholder:"Cidade",...b("cidade"),error:!!(t.cidade&&l.cidade),helperText:e.jsx(e.Fragment,{children:t.cidade&&l.cidade})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"estado",children:"Estado"}),e.jsxs(O,{fullWidth:!0,error:!!(t.estado&&l.estado),children:[e.jsxs(W,{id:"estado",...b("estado"),onChange:async h=>await B("estado",h.target.value),value:F.values.estado||"",displayEmpty:!0,children:[e.jsx(a,{value:"",children:"Selecione"}),e.jsx(a,{value:"AC",children:"Acre"}),e.jsx(a,{value:"AL",children:"Alagoas"}),e.jsx(a,{value:"AP",children:"Amapá"}),e.jsx(a,{value:"AM",children:"Amazonas"}),e.jsx(a,{value:"BA",children:"Bahia"}),e.jsx(a,{value:"CE",children:"Ceará"}),e.jsx(a,{value:"DF",children:"Distrito Federal"}),e.jsx(a,{value:"ES",children:"Espírito Santo"}),e.jsx(a,{value:"GO",children:"Goiás"}),e.jsx(a,{value:"MA",children:"Maranhão"}),e.jsx(a,{value:"MT",children:"Mato Grosso"}),e.jsx(a,{value:"MS",children:"Mato Grosso do Sul"}),e.jsx(a,{value:"MG",children:"Minas Gerais"}),e.jsx(a,{value:"PA",children:"Pará"}),e.jsx(a,{value:"PB",children:"Paraíba"}),e.jsx(a,{value:"PR",children:"Paraná"}),e.jsx(a,{value:"PE",children:"Pernambuco"}),e.jsx(a,{value:"PI",children:"Piauí"}),e.jsx(a,{value:"RJ",children:"Rio de Janeiro"}),e.jsx(a,{value:"RN",children:"Rio Grande do Norte"}),e.jsx(a,{value:"RS",children:"Rio Grande do Sul"}),e.jsx(a,{value:"RO",children:"Rondônia"}),e.jsx(a,{value:"RR",children:"Roraima"}),e.jsx(a,{value:"SC",children:"Santa Catarina"}),e.jsx(a,{value:"SP",children:"São Paulo"}),e.jsx(a,{value:"SE",children:"Sergipe"}),e.jsx(a,{value:"TO",children:"Tocantins"})]}),e.jsx(q,{children:e.jsx(e.Fragment,{children:t.estado&&l.estado})})]})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"email",children:"Email"}),e.jsx(C,{fullWidth:!0,id:"email",placeholder:"Email",...b("email"),error:!!(t.email&&l.email),helperText:e.jsx(e.Fragment,{children:t.email&&l.email}),type:"email"})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"telefone",children:"Telefone"}),e.jsx(A,{mask:"(99) 99999-9999",value:b("telefone").value,onChange:b("telefone").onChange,children:()=>e.jsx(C,{fullWidth:!0,id:"telefone",placeholder:"Telefone",error:!!(t.telefone&&l.telefone),helperText:e.jsx(e.Fragment,{children:t.telefone&&l.telefone})})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"nome_contato",children:"Nome do contato"}),e.jsx(C,{fullWidth:!0,id:"nome_contato",placeholder:"Nome do contato",...b("nome_contato"),error:!!(t.nome_contato&&l.nome_contato),helperText:e.jsx(e.Fragment,{children:t.nome_contato&&l.nome_contato})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"email_contato",children:"Email do contato"}),e.jsx(C,{fullWidth:!0,id:"email_contato",placeholder:"Email",...b("email_contato"),error:!!(t.email_contato&&l.email_contato),helperText:e.jsx(e.Fragment,{children:t.email_contato&&l.email_contato}),type:"email"})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"telefone_contato",children:"Telefone do contato"}),e.jsx(A,{mask:"(99) 9999-9999",value:b("telefone_contato").value,onChange:b("telefone_contato").onChange,children:()=>e.jsx(C,{fullWidth:!0,id:"telefone_contato",placeholder:"Telefone",error:!!(t.telefone_contato&&l.telefone_contato),helperText:e.jsx(e.Fragment,{children:t.telefone_contato&&l.telefone_contato})})})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"categoria",children:"Categoria"}),e.jsxs(O,{fullWidth:!0,error:!!(t.name&&l.name),children:[e.jsx(W,{id:"categoria",placeholder:"Nome",...b("categoria"),value:F.values.categoria,children:v.map(h=>e.jsx(a,{value:h.id,children:h.categoria},"ct_"+h.id))}),t.categoria&&l.categoria&&e.jsx(q,{children:e.jsx(e.Fragment,{children:l.categoria})})]})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsxs(m,{spacing:1,children:[e.jsx(p,{htmlFor:"condicoes_pagamento",children:"Condições de pagamento"}),e.jsxs(O,{fullWidth:!0,error:!!(t.condicoes_pagamento&&l.condicoes_pagamento),children:[e.jsxs(W,{id:"condicoes_pagamento",...b("condicoes_pagamento"),value:F.values.condicoes_pagamento,multiple:!0,children:[e.jsx(a,{value:"Pix",children:"Pix"}),e.jsx(a,{value:"Cartão de crédito",children:"Cartão de crédito"}),e.jsx(a,{value:"Boleto",children:"Boleto"})]}),e.jsx(q,{children:e.jsx(e.Fragment,{children:t.condicoes_pagamento&&l.condicoes_pagamento})})]})]})}),e.jsx(u,{item:!0,xs:12,sm:4,children:e.jsx(m,{spacing:1,direction:"row",alignItems:"center",children:e.jsx(Ce,{control:e.jsx(Se,{checked:F.values.status,onChange:async h=>await B("status",h.target.checked),name:"status"}),label:"Ativar ou desativar fornecedor"})})})]})})})}),e.jsx(J,{}),e.jsx(ge,{sx:{p:2.5},children:e.jsx(u,{container:!0,alignItems:"center",display:{justifyContent:"flex-end"},children:e.jsx(u,{item:!0,children:e.jsxs(m,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(N,{color:"error",onClick:n,children:"Cancelar"}),e.jsx(N,{type:"submit",variant:"contained",disabled:s,children:"Cadastrar"})]})})})})]})})})},yo=({openModalCreate:o,modalToggler:n,supplier:r})=>{const x=()=>{n(!1)},v=r?e.jsx(X,{sx:{p:5},children:e.jsx(m,{direction:"row",justifyContent:"center",children:e.jsx(Ze,{})})}):e.jsx(_o,{supplier:r??null,closeModal:x});return e.jsx(Re,{open:o,onClose:x,"aria-labelledby":"modal-supplier-add-label","aria-describedby":"modal-supplier-add-description",sx:{"& .MuiPaper-root:focus":{outline:"none"}},children:e.jsx(je,{sx:{width:"calc(100% - 48px)",minWidth:340,maxWidth:880,height:"auto",maxHeight:"calc(100vh - 48px)"},modal:!0,content:!1,children:e.jsx(Be,{sx:{maxHeight:"calc(100vh - 48px)","& .simplebar-content":{display:"flex",flexDirection:"column"}},children:v})})})},Fo=(o,n,r,x)=>{const v=Qe(o.getValue(n),r);return x(v),v.passed};function Po({data:o,columns:n,modalToggler:r}){const x=fe(),v=Me(x.breakpoints.down("sm")),[w,P]=f.useState([{id:"id",desc:!0}]),[k,y]=f.useState({}),[F,l]=f.useState(""),t=Ee({data:o,columns:n,state:{sorting:w,rowSelection:k,globalFilter:F},enableRowSelection:!0,onSortingChange:P,onRowSelectionChange:y,onGlobalFilterChange:l,getRowCanExpand:()=>!0,getSortedRowModel:Le(),getFilteredRowModel:Ge(),getCoreRowModel:Ve(),getPaginationRowModel:He(),getExpandedRowModel:Je(),globalFilterFn:Fo,debugTable:!0});return $e(x.palette.primary.lighter,.1),e.jsxs(je,{content:!1,children:[e.jsxs(m,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:2,...v&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(Ae,{value:F??"",onFilterChange:c=>{l(String(c))},placeholder:`Buscar ${o.length} ...`}),e.jsxs(m,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:[e.jsx(ro,{getState:t.getState,getAllColumns:t.getAllColumns,setSorting:P}),e.jsx(m,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(N,{variant:"contained",startIcon:e.jsx(Ue,{}),onClick:r,children:"Adicionar Fornecedor"})})]})]}),e.jsx(De,{children:e.jsxs(m,{children:[e.jsx(Xe,{selected:Object.keys(k).length}),e.jsx(Ie,{children:e.jsxs(Ne,{children:[e.jsx(Oe,{children:t.getHeaderGroups().map(c=>e.jsx(Q,{children:c.headers.map(s=>(s.column.columnDef.meta!==void 0&&s.column.getCanSort()&&Object.assign(s.column.columnDef.meta,{className:s.column.columnDef.meta.className+" cursor-pointer prevent-select"}),e.jsx(Y,{...s.column.columnDef.meta,onClick:s.column.getToggleSortingHandler(),...s.column.getCanSort()&&s.column.columnDef.meta===void 0&&{className:"cursor-pointer prevent-select"},children:s.isPlaceholder?null:e.jsxs(m,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(X,{children:oe(s.column.columnDef.header,s.getContext())}),s.column.getCanSort()&&e.jsx(ao,{column:s.column})]})},s.id)))},c.id))}),e.jsx(We,{children:t.getRowModel().rows.length===0?e.jsx(Q,{children:e.jsx(Y,{colSpan:n.length,align:"center",children:e.jsx(qe,{msg:"Nenhum registro encontrado"})})}):t.getRowModel().rows.map(c=>e.jsx(f.Fragment,{children:e.jsx(Q,{children:c.getVisibleCells().map(s=>e.jsx(Y,{...s.column.columnDef.meta,children:oe(s.column.columnDef.cell,s.getContext())},s.id))})},c.id))})]})}),e.jsxs(e.Fragment,{children:[e.jsx(J,{}),e.jsx(X,{sx:{p:2},children:e.jsx(ze,{setPageSize:t.setPageSize,setPageIndex:t.setPageIndex,getState:t.getState,getPageCount:t.getPageCount})})]})]})})]})}function Eo(){const o=fe(),[n,r]=f.useState(!1),[x,v]=f.useState(!1),[w,P]=f.useState(!1),[k,y]=f.useState(!1),[F,l]=f.useState(null),[t,c]=f.useState(""),[s,b]=f.useState(""),[B,j]=f.useState([]),R=async()=>{try{const d=await z.get("/inventory/suppliers");j(d.data.fornecedores.rows)}catch(d){console.error("Erro ao buscar dados:",d)}};f.useEffect(()=>{R()},[k,x]);const $=()=>{r(!n)},h=()=>{y(!0)},S=()=>{v(!x)},i=f.useMemo(()=>[{id:"select",header:({table:d})=>e.jsx(ae,{checked:d.getIsAllRowsSelected(),indeterminate:d.getIsSomeRowsSelected(),onChange:d.getToggleAllRowsSelectedHandler()}),cell:({row:d})=>e.jsx(ae,{checked:d.getIsSelected(),disabled:!d.getCanSelect(),indeterminate:d.getIsSomeSelected(),onChange:d.getToggleSelectedHandler()}),meta:{className:"p-0"}},{accessorKey:"nome",header:"Nome do fornecedor"},{accessorKey:"cnpj",header:"CNPJ"},{accessorKey:"categoria.categoria",header:"Categoria"},{accessorKey:"condicoes_pagamento",header:"Condição de pagamento",cell:({row:d})=>{const M=d.original.condicoes_pagamento;let _=[];if(M)try{_=M.split(",").map(E=>E.trim())}catch(E){console.error("Erro ao fazer parsing das condições de pagamento:",E)}return!_||_.length===0?e.jsx(G,{label:"Nenhuma condição",size:"small",variant:"outlined"}):e.jsx(m,{direction:"row",spacing:1,children:_.map((E,we)=>e.jsx(G,{label:E,size:"small",variant:"outlined"},we))})}},{accessorKey:"status",header:"Status",cell:d=>{switch(d.getValue()){case!1:return e.jsx(K,{title:"Para ativar o fornecedor, clique no botão de editar.",children:e.jsx(G,{color:"error",label:"Inativo",size:"small",variant:"light"})});case!0:return e.jsx(K,{title:"Para desativar o fornecedor, clique no botão de editar.",children:e.jsx(G,{color:"success",label:"Ativo",size:"small",variant:"light"})});case null:default:return e.jsx(G,{color:"info",label:"Pendente",size:"small",variant:"light"})}}},{id:"actions",header:"Actions",cell:({row:d})=>e.jsxs(m,{direction:"row",spacing:1,children:[e.jsx(K,{title:"Editar",children:e.jsx(re,{color:"primary",onClick:()=>{l(d.original),h()},children:e.jsx(eo,{})})}),e.jsx(K,{title:"Excluir",children:e.jsx(re,{color:"error",onClick:()=>{c(d.original.id),r(!0),b(d.original.nome)},children:e.jsx(Ye,{})})})]})}],[o]);return e.jsxs(e.Fragment,{children:[e.jsx(Po,{data:B,columns:i,modalToggler:()=>{P(!0),l(null),S()}}),e.jsx(Co,{id:t,title:t,open:n,handleClose:$,name:s}),e.jsx(yo,{openModalCreate:x,modalToggler:S}),e.jsx(So,{modalEdit:k,handleClose:()=>{y(!1)},data:F})]})}export{Eo as default};
