import{j as o,a3 as Te,a4 as yr,a5 as de,S as T,a6 as wr,T as pe,h as v,k as le,r as B,c as Ge,a as ae,a8 as Ue,B as ee,a9 as Pe,aa as He,ab as Qe,ac as ue,G as R,I as ce,ad as me,p as Xe,af as Ye,ag as Ze,b as er,ae as ge,av as ye,aw as Fr,ax as Ve,ah as Er,M as rr,ai as Ir,n as tr,J as Br,K as jr,aj as Cr,Q as br,U as Sr,W as Rr,X as Ar,Y as Ce,Z as be,$ as We,a0 as Tr,ak as Ur,al as Pr,P as Mr,am as kr,N as Dr,an as Lr,ao as vr,ap as Se,aq as Re,ay as Nr}from"./index-59fc1978.js";import{D as _r,P as Kr,R as Or,r as $r,I as qe,a as Jr}from"./index-26f02c47.js";import{a as Vr}from"./app-cb24a545.js";import{L as nr,A as ir,a as Me,C as Wr,E as qr}from"./CircularWithPath-8c799476.js";import{S as zr,H as Gr}from"./SelectColumnSorting-f02271ea.js";function Hr({id:x,title:d,open:l,handleClose:p,name:f}){const u=async i=>{try{await le.delete(`/inventory/rooms/${i}`)}catch(y){throw console.error("Erro ao deletar o polo:",y),y}},h=async()=>{try{await u(x),p(),window.location.reload()}catch{}};return o.jsx(Te,{open:l,onClose:p,keepMounted:!0,TransitionComponent:yr,maxWidth:"xs","aria-labelledby":"column-delete-title","aria-describedby":"column-delete-description",children:o.jsx(de,{sx:{mt:2,my:1},children:o.jsxs(T,{alignItems:"center",spacing:3.5,children:[o.jsx(wr,{color:"error",sx:{width:72,height:72,fontSize:"1.75rem"},children:o.jsx(_r,{})}),o.jsxs(T,{spacing:2,children:[o.jsx(pe,{variant:"h4",align:"center",children:"Você tem certeza?"}),o.jsxs(pe,{align:"center",children:["Você está deletando o departamento",o.jsx(pe,{variant:"subtitle1",component:"span",sx:{ml:.5},children:f}),", esta operação não pode ser desfeita."]})]}),o.jsxs(T,{direction:"row",spacing:2,sx:{width:1},children:[o.jsx(v,{fullWidth:!0,onClick:p,color:"secondary",variant:"outlined",children:"Cancelar"}),o.jsx(v,{fullWidth:!0,color:"error",variant:"contained",onClick:h,autoFocus:!0,children:"Deletar"})]})]})})})}function Qr({handleClose:x,modalEdit:d,data:l}){const[p,f]=B.useState(null),[u,h]=B.useState(null),i=B.useRef(null),y=B.useRef(null),[m,F]=B.useState(!1),[w,b]=B.useState(!1),[g,C]=B.useState(!0),[M,_]=B.useState([]),N=I=>({id:I==null?void 0:I.id,sala:(I==null?void 0:I.sala)??"",polo:(I==null?void 0:I.polo.id)??"",descricao:(I==null?void 0:I.descricao)??"",image:(I==null?void 0:I.imagem)??""}),X=Ge().shape({sala:ae().max(255).required("Nome é obrigatorio"),polo:ae().max(255).required("Nome do Polo é obrigatorio"),description:ae().max(500)}),K=Ue({initialValues:N(l),validationSchema:X,enableReinitialize:!0,onSubmit:async(I,{setSubmitting:Z})=>{try{const V=new FormData;if(V.append("sala",String(I.sala)),V.append("poloId",String(I.polo)),V.append("descricao",I.descricao),I.image){const Ee=await(await fetch(I.image)).blob();V.append("imagem",Ee,"captured-photo.png")}await le.put(`/inventory/rooms/${l.id}`,V,{headers:{"Content-Type":"multipart/form-data"}}),Z(!1),x(!1),window.location.reload()}catch(V){console.error("Error saving data:",V)}}}),{errors:D,touched:k,handleSubmit:Y,getFieldProps:$,setFieldValue:G}=K,q=()=>{p&&(p.getTracks().forEach(I=>{I.stop()}),f(null)),F(!1)},J=()=>{if(i.current&&y.current){const I=y.current.getContext("2d");if(I){y.current.width=i.current.videoWidth,y.current.height=i.current.videoHeight,I.drawImage(i.current,0,0);const Z=y.current.toDataURL("image/png");h(Z),G("image",Z),q()}}},E=()=>{h(null),G("image",null)},z=async()=>{try{const I=await le.get("/inventory/polo/details");_(I.data.polos)}catch(I){console.error("Error fetching polos:",I)}finally{C(!1)}};return B.useEffect(()=>{z()},[]),o.jsx("div",{children:o.jsx(Te,{open:d,keepMounted:!0,onClose:()=>x(!1),"aria-describedby":"alert-dialog-slide-description",children:o.jsx(ee,{sx:{p:1,py:1.5},children:o.jsx(de,{children:o.jsx(Pe,{value:K,children:o.jsx(nr,{dateAdapter:ir,children:o.jsxs(He,{autoComplete:"off",noValidate:!0,onSubmit:Y,children:[o.jsx(Qe,{children:"Editar Sala"}),o.jsx(ue,{}),o.jsx(de,{sx:{p:2.5},children:o.jsx(R,{container:!0,spacing:3,children:o.jsx(R,{item:!0,xs:12,children:o.jsxs(R,{container:!0,spacing:3,children:[o.jsx(R,{item:!0,xs:12,sm:6,children:o.jsxs(T,{spacing:1,children:[o.jsx(ce,{htmlFor:"sala",children:"Nome da Sala"}),o.jsx(me,{fullWidth:!0,id:"sala",placeholder:"Nome",...$("sala"),error:!!(k.sala&&D.sala),helperText:o.jsx(o.Fragment,{children:k.sala&&D.sala})})]})}),o.jsx(R,{item:!0,xs:12,sm:4,children:o.jsxs(T,{spacing:1,children:[o.jsx(ce,{htmlFor:"polo",children:"polo"}),o.jsxs(Xe,{fullWidth:!0,error:!!(k.polo&&D.polo),children:[o.jsx(Ye,{id:"polo",placeholder:"Nome",...$("polo"),value:K.values.polo,children:!g&&M.map(I=>o.jsx(Ze,{value:I.id,children:I.polo},"p_"+I.id))}),k.polo&&D.polo&&o.jsx(er,{children:typeof D.polo})]})]})}),o.jsx(R,{item:!0,xs:12,children:o.jsxs(T,{spacing:1,children:[o.jsx(ce,{htmlFor:"descricao",children:"Descrição"}),o.jsx(me,{fullWidth:!0,id:"descricao",multiline:!0,minRows:2,placeholder:"Descrição",...$("descricao"),error:!!(k.descricao&&D.descricao),helperText:o.jsx(o.Fragment,{children:k.descricao&&D.descricao})})]})}),o.jsx(R,{item:!0,xs:12,children:o.jsxs(T,{spacing:1,sx:{alignItems:"center",justifyContent:"center"},children:[w&&o.jsx(ee,{style:{display:"flex",width:"20%",height:"auto",marginTop:20,justifyContent:"center",alignItems:"center"},children:o.jsx(Me,{})}),!m&&!K.values.img&&!w&&o.jsx(v,{variant:"contained",onClick:()=>{},children:"alterar imagem"}),m&&o.jsxs(o.Fragment,{children:[o.jsx("video",{ref:i,style:{width:"20%",height:"auto",marginTop:20}}),o.jsx("canvas",{ref:y,style:{display:"none"}}),o.jsxs(T,{direction:"row",spacing:2,style:{marginTop:20},children:[o.jsx(v,{variant:"outlined",color:"error",onClick:q,children:"Cancelar"}),o.jsx(v,{variant:"contained",onClick:J,children:"Tirar Foto"})]})]}),u&&o.jsxs(T,{spacing:2,style:{marginTop:20,alignItems:"center"},children:[o.jsx("img",{src:u,alt:"Captured",style:{width:"20%",height:"auto"}}),o.jsx(v,{variant:"outlined",color:"error",onClick:E,children:"Remover Foto"})]}),!u&&!m&&o.jsx("img",{src:`${Vr.api_url}/${K.values.image}`,alt:"Sala",style:{width:"20%",height:"auto",marginTop:20}})]})})]})})})}),o.jsx(ue,{}),o.jsxs(ge,{sx:{p:2.5},children:[o.jsx(R,{container:!0,justifyContent:"space-between",alignItems:"center",children:o.jsx(R,{item:!0})}),o.jsxs(ge,{children:[o.jsx(v,{color:"error",onClick:()=>x(!1),children:"Cancelar"}),o.jsx(v,{variant:"contained",type:"submit",children:"Cadastrar"})]})]})]})})})})})})})}var or={},we={};we.byteLength=Zr;we.toByteArray=rt;we.fromByteArray=it;var Q=[],W=[],Xr=typeof Uint8Array<"u"?Uint8Array:Array,Ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ie=0,Yr=Ae.length;ie<Yr;++ie)Q[ie]=Ae[ie],W[Ae.charCodeAt(ie)]=ie;W["-".charCodeAt(0)]=62;W["_".charCodeAt(0)]=63;function sr(x){var d=x.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=x.indexOf("=");l===-1&&(l=d);var p=l===d?0:4-l%4;return[l,p]}function Zr(x){var d=sr(x),l=d[0],p=d[1];return(l+p)*3/4-p}function et(x,d,l){return(d+l)*3/4-l}function rt(x){var d,l=sr(x),p=l[0],f=l[1],u=new Xr(et(x,p,f)),h=0,i=f>0?p-4:p,y;for(y=0;y<i;y+=4)d=W[x.charCodeAt(y)]<<18|W[x.charCodeAt(y+1)]<<12|W[x.charCodeAt(y+2)]<<6|W[x.charCodeAt(y+3)],u[h++]=d>>16&255,u[h++]=d>>8&255,u[h++]=d&255;return f===2&&(d=W[x.charCodeAt(y)]<<2|W[x.charCodeAt(y+1)]>>4,u[h++]=d&255),f===1&&(d=W[x.charCodeAt(y)]<<10|W[x.charCodeAt(y+1)]<<4|W[x.charCodeAt(y+2)]>>2,u[h++]=d>>8&255,u[h++]=d&255),u}function tt(x){return Q[x>>18&63]+Q[x>>12&63]+Q[x>>6&63]+Q[x&63]}function nt(x,d,l){for(var p,f=[],u=d;u<l;u+=3)p=(x[u]<<16&16711680)+(x[u+1]<<8&65280)+(x[u+2]&255),f.push(tt(p));return f.join("")}function it(x){for(var d,l=x.length,p=l%3,f=[],u=16383,h=0,i=l-p;h<i;h+=u)f.push(nt(x,h,h+u>i?i:h+u));return p===1?(d=x[l-1],f.push(Q[d>>2]+Q[d<<4&63]+"==")):p===2&&(d=(x[l-2]<<8)+x[l-1],f.push(Q[d>>10]+Q[d>>4&63]+Q[d<<2&63]+"=")),f.join("")}var ke={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ke.read=function(x,d,l,p,f){var u,h,i=f*8-p-1,y=(1<<i)-1,m=y>>1,F=-7,w=l?f-1:0,b=l?-1:1,g=x[d+w];for(w+=b,u=g&(1<<-F)-1,g>>=-F,F+=i;F>0;u=u*256+x[d+w],w+=b,F-=8);for(h=u&(1<<-F)-1,u>>=-F,F+=p;F>0;h=h*256+x[d+w],w+=b,F-=8);if(u===0)u=1-m;else{if(u===y)return h?NaN:(g?-1:1)*(1/0);h=h+Math.pow(2,p),u=u-m}return(g?-1:1)*h*Math.pow(2,u-p)};ke.write=function(x,d,l,p,f,u){var h,i,y,m=u*8-f-1,F=(1<<m)-1,w=F>>1,b=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=p?0:u-1,C=p?1:-1,M=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(i=isNaN(d)?1:0,h=F):(h=Math.floor(Math.log(d)/Math.LN2),d*(y=Math.pow(2,-h))<1&&(h--,y*=2),h+w>=1?d+=b/y:d+=b*Math.pow(2,1-w),d*y>=2&&(h++,y/=2),h+w>=F?(i=0,h=F):h+w>=1?(i=(d*y-1)*Math.pow(2,f),h=h+w):(i=d*Math.pow(2,w-1)*Math.pow(2,f),h=0));f>=8;x[l+g]=i&255,g+=C,i/=256,f-=8);for(h=h<<f|i,m+=f;m>0;x[l+g]=h&255,g+=C,h/=256,m-=8);x[l+g-C]|=M*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(x){const d=we,l=ke,p=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;x.Buffer=i,x.SlowBuffer=X,x.INSPECT_MAX_BYTES=50;const f=2147483647;x.kMaxLength=f,i.TYPED_ARRAY_SUPPORT=u(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function h(t){if(t>f)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,i.prototype),e}function i(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(t)}return y(t,e,r)}i.poolSize=8192;function y(t,e,r){if(typeof t=="string")return b(t,e);if(ArrayBuffer.isView(t))return C(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(H(t,ArrayBuffer)||t&&H(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(H(t,SharedArrayBuffer)||t&&H(t.buffer,SharedArrayBuffer)))return M(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return i.from(n,e,r);const s=_(t);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return i.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}i.from=function(t,e,r){return y(t,e,r)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function m(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function F(t,e,r){return m(t),t<=0?h(t):e!==void 0?typeof r=="string"?h(t).fill(e,r):h(t).fill(e):h(t)}i.alloc=function(t,e,r){return F(t,e,r)};function w(t){return m(t),h(t<0?0:N(t)|0)}i.allocUnsafe=function(t){return w(t)},i.allocUnsafeSlow=function(t){return w(t)};function b(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!i.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=K(t,e)|0;let n=h(r);const s=n.write(t,e);return s!==r&&(n=n.slice(0,s)),n}function g(t){const e=t.length<0?0:N(t.length)|0,r=h(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function C(t){if(H(t,Uint8Array)){const e=new Uint8Array(t);return M(e.buffer,e.byteOffset,e.byteLength)}return g(t)}function M(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,i.prototype),n}function _(t){if(i.isBuffer(t)){const e=N(t.length)|0,r=h(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||je(t.length)?h(0):g(t);if(t.type==="Buffer"&&Array.isArray(t.data))return g(t.data)}function N(t){if(t>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return t|0}function X(t){return+t!=t&&(t=0),i.alloc(+t)}i.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==i.prototype},i.compare=function(e,r){if(H(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),H(r,Uint8Array)&&(r=i.from(r,r.offset,r.byteLength)),!i.isBuffer(e)||!i.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,s=r.length;for(let a=0,c=Math.min(n,s);a<c;++a)if(e[a]!==r[a]){n=e[a],s=r[a];break}return n<s?-1:s<n?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return i.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;const s=i.allocUnsafe(r);let a=0;for(n=0;n<e.length;++n){let c=e[n];if(H(c,Uint8Array))a+c.length>s.length?(i.isBuffer(c)||(c=i.from(c)),c.copy(s,a)):Uint8Array.prototype.set.call(s,c,a);else if(i.isBuffer(c))c.copy(s,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=c.length}return s};function K(t,e){if(i.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||H(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Be(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Je(t).length;default:if(s)return n?-1:Be(t).length;e=(""+e).toLowerCase(),s=!0}}i.byteLength=K;function D(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return lr(this,e,r);case"utf8":case"utf-8":return Z(this,e,r);case"ascii":return Ee(this,e,r);case"latin1":case"binary":return cr(this,e,r);case"base64":return I(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ur(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}i.prototype._isBuffer=!0;function k(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}i.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)k(this,r,r+1);return this},i.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)k(this,r,r+3),k(this,r+1,r+2);return this},i.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)k(this,r,r+7),k(this,r+1,r+6),k(this,r+2,r+5),k(this,r+3,r+4);return this},i.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?Z(this,0,e):D.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:i.compare(this,e)===0},i.prototype.inspect=function(){let e="";const r=x.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},p&&(i.prototype[p]=i.prototype.inspect),i.prototype.compare=function(e,r,n,s,a){if(H(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),s===void 0&&(s=0),a===void 0&&(a=this.length),r<0||n>e.length||s<0||a>this.length)throw new RangeError("out of range index");if(s>=a&&r>=n)return 0;if(s>=a)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,s>>>=0,a>>>=0,this===e)return 0;let c=a-s,j=n-r;const U=Math.min(c,j),A=this.slice(s,a),P=e.slice(r,n);for(let S=0;S<U;++S)if(A[S]!==P[S]){c=A[S],j=P[S];break}return c<j?-1:j<c?1:0};function Y(t,e,r,n,s){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,je(r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0)if(s)r=0;else return-1;if(typeof e=="string"&&(e=i.from(e,n)),i.isBuffer(e))return e.length===0?-1:$(t,e,r,n,s);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):$(t,[e],r,n,s);throw new TypeError("val must be string, number or Buffer")}function $(t,e,r,n,s){let a=1,c=t.length,j=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;a=2,c/=2,j/=2,r/=2}function U(P,S){return a===1?P[S]:P.readUInt16BE(S*a)}let A;if(s){let P=-1;for(A=r;A<c;A++)if(U(t,A)===U(e,P===-1?0:A-P)){if(P===-1&&(P=A),A-P+1===j)return P*a}else P!==-1&&(A-=A-P),P=-1}else for(r+j>c&&(r=c-j),A=r;A>=0;A--){let P=!0;for(let S=0;S<j;S++)if(U(t,A+S)!==U(e,S)){P=!1;break}if(P)return A}return-1}i.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1},i.prototype.indexOf=function(e,r,n){return Y(this,e,r,n,!0)},i.prototype.lastIndexOf=function(e,r,n){return Y(this,e,r,n,!1)};function G(t,e,r,n){r=Number(r)||0;const s=t.length-r;n?(n=Number(n),n>s&&(n=s)):n=s;const a=e.length;n>a/2&&(n=a/2);let c;for(c=0;c<n;++c){const j=parseInt(e.substr(c*2,2),16);if(je(j))return c;t[r+c]=j}return c}function q(t,e,r,n){return fe(Be(e,t.length-r),t,r,n)}function J(t,e,r,n){return fe(fr(e),t,r,n)}function E(t,e,r,n){return fe(Je(e),t,r,n)}function z(t,e,r,n){return fe(xr(e,t.length-r),t,r,n)}i.prototype.write=function(e,r,n,s){if(r===void 0)s="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")s=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const a=this.length-r;if((n===void 0||n>a)&&(n=a),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let c=!1;for(;;)switch(s){case"hex":return G(this,e,r,n);case"utf8":case"utf-8":return q(this,e,r,n);case"ascii":case"latin1":case"binary":return J(this,e,r,n);case"base64":return E(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,e,r,n);default:if(c)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),c=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(t,e,r){return e===0&&r===t.length?d.fromByteArray(t):d.fromByteArray(t.slice(e,r))}function Z(t,e,r){r=Math.min(t.length,r);const n=[];let s=e;for(;s<r;){const a=t[s];let c=null,j=a>239?4:a>223?3:a>191?2:1;if(s+j<=r){let U,A,P,S;switch(j){case 1:a<128&&(c=a);break;case 2:U=t[s+1],(U&192)===128&&(S=(a&31)<<6|U&63,S>127&&(c=S));break;case 3:U=t[s+1],A=t[s+2],(U&192)===128&&(A&192)===128&&(S=(a&15)<<12|(U&63)<<6|A&63,S>2047&&(S<55296||S>57343)&&(c=S));break;case 4:U=t[s+1],A=t[s+2],P=t[s+3],(U&192)===128&&(A&192)===128&&(P&192)===128&&(S=(a&15)<<18|(U&63)<<12|(A&63)<<6|P&63,S>65535&&S<1114112&&(c=S))}}c===null?(c=65533,j=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|c&1023),n.push(c),s+=j}return De(n)}const V=4096;function De(t){const e=t.length;if(e<=V)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=V));return r}function Ee(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]&127);return n}function cr(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]);return n}function lr(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let s="";for(let a=e;a<r;++a)s+=mr[t[a]];return s}function ur(t,e,r){const n=t.slice(e,r);let s="";for(let a=0;a<n.length-1;a+=2)s+=String.fromCharCode(n[a]+n[a+1]*256);return s}i.prototype.slice=function(e,r){const n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);const s=this.subarray(e,r);return Object.setPrototypeOf(s,i.prototype),s};function L(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||L(e,r,this.length);let s=this[e],a=1,c=0;for(;++c<r&&(a*=256);)s+=this[e+c]*a;return s},i.prototype.readUintBE=i.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||L(e,r,this.length);let s=this[e+--r],a=1;for(;r>0&&(a*=256);)s+=this[e+--r]*a;return s},i.prototype.readUint8=i.prototype.readUInt8=function(e,r){return e=e>>>0,r||L(e,1,this.length),this[e]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||L(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||L(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||L(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readBigUInt64LE=re(function(e){e=e>>>0,ne(e,"offset");const r=this[e],n=this[e+7];(r===void 0||n===void 0)&&he(e,this.length-8);const s=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,a=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(s)+(BigInt(a)<<BigInt(32))}),i.prototype.readBigUInt64BE=re(function(e){e=e>>>0,ne(e,"offset");const r=this[e],n=this[e+7];(r===void 0||n===void 0)&&he(e,this.length-8);const s=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],a=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(s)<<BigInt(32))+BigInt(a)}),i.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||L(e,r,this.length);let s=this[e],a=1,c=0;for(;++c<r&&(a*=256);)s+=this[e+c]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*r)),s},i.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||L(e,r,this.length);let s=r,a=1,c=this[e+--s];for(;s>0&&(a*=256);)c+=this[e+--s]*a;return a*=128,c>=a&&(c-=Math.pow(2,8*r)),c},i.prototype.readInt8=function(e,r){return e=e>>>0,r||L(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},i.prototype.readInt16LE=function(e,r){e=e>>>0,r||L(e,2,this.length);const n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n},i.prototype.readInt16BE=function(e,r){e=e>>>0,r||L(e,2,this.length);const n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n},i.prototype.readInt32LE=function(e,r){return e=e>>>0,r||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,r){return e=e>>>0,r||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readBigInt64LE=re(function(e){e=e>>>0,ne(e,"offset");const r=this[e],n=this[e+7];(r===void 0||n===void 0)&&he(e,this.length-8);const s=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(s)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),i.prototype.readBigInt64BE=re(function(e){e=e>>>0,ne(e,"offset");const r=this[e],n=this[e+7];(r===void 0||n===void 0)&&he(e,this.length-8);const s=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)}),i.prototype.readFloatLE=function(e,r){return e=e>>>0,r||L(e,4,this.length),l.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,r){return e=e>>>0,r||L(e,4,this.length),l.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||L(e,8,this.length),l.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||L(e,8,this.length),l.read(this,e,!1,52,8)};function O(t,e,r,n,s,a){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){const j=Math.pow(2,8*n)-1;O(this,e,r,n,j,0)}let a=1,c=0;for(this[r]=e&255;++c<n&&(a*=256);)this[r+c]=e/a&255;return r+n},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){const j=Math.pow(2,8*n)-1;O(this,e,r,n,j,0)}let a=n-1,c=1;for(this[r+a]=e&255;--a>=0&&(c*=256);)this[r+a]=e/c&255;return r+n},i.prototype.writeUint8=i.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||O(this,e,r,1,255,0),this[r]=e&255,r+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||O(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||O(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||O(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||O(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Le(t,e,r,n,s){$e(e,n,s,t,r,7);let a=Number(e&BigInt(4294967295));t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a;let c=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=c,c=c>>8,t[r++]=c,c=c>>8,t[r++]=c,c=c>>8,t[r++]=c,r}function ve(t,e,r,n,s){$e(e,n,s,t,r,7);let a=Number(e&BigInt(4294967295));t[r+7]=a,a=a>>8,t[r+6]=a,a=a>>8,t[r+5]=a,a=a>>8,t[r+4]=a;let c=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=c,c=c>>8,t[r+2]=c,c=c>>8,t[r+1]=c,c=c>>8,t[r]=c,r+8}i.prototype.writeBigUInt64LE=re(function(e,r=0){return Le(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=re(function(e,r=0){return ve(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){const U=Math.pow(2,8*n-1);O(this,e,r,n,U-1,-U)}let a=0,c=1,j=0;for(this[r]=e&255;++a<n&&(c*=256);)e<0&&j===0&&this[r+a-1]!==0&&(j=1),this[r+a]=(e/c>>0)-j&255;return r+n},i.prototype.writeIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){const U=Math.pow(2,8*n-1);O(this,e,r,n,U-1,-U)}let a=n-1,c=1,j=0;for(this[r+a]=e&255;--a>=0&&(c*=256);)e<0&&j===0&&this[r+a+1]!==0&&(j=1),this[r+a]=(e/c>>0)-j&255;return r+n},i.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||O(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1},i.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||O(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2},i.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||O(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2},i.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||O(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4},i.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||O(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4},i.prototype.writeBigInt64LE=re(function(e,r=0){return Le(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=re(function(e,r=0){return ve(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ne(t,e,r,n,s,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function _e(t,e,r,n,s){return e=+e,r=r>>>0,s||Ne(t,e,r,4),l.write(t,e,r,n,23,4),r+4}i.prototype.writeFloatLE=function(e,r,n){return _e(this,e,r,!0,n)},i.prototype.writeFloatBE=function(e,r,n){return _e(this,e,r,!1,n)};function Ke(t,e,r,n,s){return e=+e,r=r>>>0,s||Ne(t,e,r,8),l.write(t,e,r,n,52,8),r+8}i.prototype.writeDoubleLE=function(e,r,n){return Ke(this,e,r,!0,n)},i.prototype.writeDoubleBE=function(e,r,n){return Ke(this,e,r,!1,n)},i.prototype.copy=function(e,r,n,s){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!s&&s!==0&&(s=this.length),r>=e.length&&(r=e.length),r||(r=0),s>0&&s<n&&(s=n),s===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-r<s-n&&(s=e.length-r+n);const a=s-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,s):Uint8Array.prototype.set.call(e,this.subarray(n,s),r),a},i.prototype.fill=function(e,r,n,s){if(typeof e=="string"){if(typeof r=="string"?(s=r,r=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!i.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(e.length===1){const c=e.charCodeAt(0);(s==="utf8"&&c<128||s==="latin1")&&(e=c)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let a;if(typeof e=="number")for(a=r;a<n;++a)this[a]=e;else{const c=i.isBuffer(e)?e:i.from(e,s),j=c.length;if(j===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-r;++a)this[a+r]=c[a%j]}return this};const te={};function Ie(t,e,r){te[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Ie("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ie("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),Ie("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,s=r;return Number.isInteger(r)&&Math.abs(r)>2**32?s=Oe(String(r)):typeof r=="bigint"&&(s=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(s=Oe(s)),s+="n"),n+=` It must be ${e}. Received ${s}`,n},RangeError);function Oe(t){let e="",r=t.length;const n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function hr(t,e,r){ne(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&he(e,t.length-(r+1))}function $e(t,e,r,n,s,a){if(t>r||t<e){const c=typeof e=="bigint"?"n":"";let j;throw a>3?e===0||e===BigInt(0)?j=`>= 0${c} and < 2${c} ** ${(a+1)*8}${c}`:j=`>= -(2${c} ** ${(a+1)*8-1}${c}) and < 2 ** ${(a+1)*8-1}${c}`:j=`>= ${e}${c} and <= ${r}${c}`,new te.ERR_OUT_OF_RANGE("value",j,t)}hr(n,s,a)}function ne(t,e){if(typeof t!="number")throw new te.ERR_INVALID_ARG_TYPE(e,"number",t)}function he(t,e,r){throw Math.floor(t)!==t?(ne(t,r),new te.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new te.ERR_BUFFER_OUT_OF_BOUNDS:new te.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}const pr=/[^+/0-9A-Za-z-_]/g;function dr(t){if(t=t.split("=")[0],t=t.trim().replace(pr,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Be(t,e){e=e||1/0;let r;const n=t.length;let s=null;const a=[];for(let c=0;c<n;++c){if(r=t.charCodeAt(c),r>55295&&r<57344){if(!s){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(c+1===n){(e-=3)>-1&&a.push(239,191,189);continue}s=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(e-=3)>-1&&a.push(239,191,189);if(s=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function fr(t){const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function xr(t,e){let r,n,s;const a=[];for(let c=0;c<t.length&&!((e-=2)<0);++c)r=t.charCodeAt(c),n=r>>8,s=r%256,a.push(s),a.push(n);return a}function Je(t){return d.toByteArray(dr(t))}function fe(t,e,r,n){let s;for(s=0;s<n&&!(s+r>=e.length||s>=t.length);++s)e[s+r]=t[s];return s}function H(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function je(t){return t!==t}const mr=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=r*16;for(let s=0;s<16;++s)e[n+s]=t[r]+t[s]}return e}();function re(t){return typeof BigInt>"u"?gr:t}function gr(){throw new Error("BigInt not supported")}})(or);var ar={},Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.API_URL=void 0;Fe.API_URL="http://localhost:9100/";var oe=ye&&ye.__awaiter||function(x,d,l,p){function f(u){return u instanceof l?u:new l(function(h){h(u)})}return new(l||(l=Promise))(function(u,h){function i(F){try{m(p.next(F))}catch(w){h(w)}}function y(F){try{m(p.throw(F))}catch(w){h(w)}}function m(F){F.done?u(F.value):f(F.value).then(i,y)}m((p=p.apply(x,d||[])).next())})},se=ye&&ye.__generator||function(x,d){var l={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},p,f,u,h;return h={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function i(m){return function(F){return y([m,F])}}function y(m){if(p)throw new TypeError("Generator is already executing.");for(;l;)try{if(p=1,f&&(u=m[0]&2?f.return:m[0]?f.throw||((u=f.return)&&u.call(f),0):f.next)&&!(u=u.call(f,m[1])).done)return u;switch(f=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return l.label++,{value:m[1],done:!1};case 5:l.label++,f=m[1],m=[0];continue;case 7:m=l.ops.pop(),l.trys.pop();continue;default:if(u=l.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){l=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){l.label=m[1];break}if(m[0]===6&&l.label<u[1]){l.label=u[1],u=m;break}if(u&&l.label<u[2]){l.label=u[2],l.ops.push(m);break}u[2]&&l.ops.pop(),l.trys.pop();continue}m=d.call(x,l)}catch(F){m=[6,F],f=0}finally{p=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}};Object.defineProperty(ar,"__esModule",{value:!0});var xe=Fe,ot=function(){function x(){var d=this;this.device={},this.getAvailablePrinters=function(){return oe(d,void 0,void 0,function(){var l,p,f,u,h;return se(this,function(i){switch(i.label){case 0:l={method:"GET",headers:{"Content-Type":"text/plain;charset=UTF-8"}},p=xe.API_URL+"available",i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(p,l)];case 2:return f=i.sent(),[4,f.json()];case 3:return u=i.sent(),u&&u!==void 0&&u.printer&&u.printer!==void 0&&u.printer.length>0?[2,u.printer]:[2,new Error("No printers available")];case 4:throw h=i.sent(),new Error(h);case 5:return[2]}})})},this.getDefaultPrinter=function(){return oe(d,void 0,void 0,function(){var l,p,f,u,h,i,y,m,F,w,b,g;return se(this,function(C){switch(C.label){case 0:l={method:"GET",headers:{"Content-Type":"text/plain;charset=UTF-8"}},p=xe.API_URL+"default",C.label=1;case 1:return C.trys.push([1,4,,5]),[4,fetch(p,l)];case 2:return f=C.sent(),[4,f.text()];case 3:if(u=C.sent(),u&&u!==void 0&&typeof u!="object"&&u.split(`
	`).length===7)return h=u.split(`
	`),i=this.cleanUpString(h[1]),y=this.cleanUpString(h[2]),m=this.cleanUpString(h[3]),F=this.cleanUpString(h[4]),w=this.cleanUpString(h[5]),b=this.cleanUpString(h[6]),[2,{connection:m,deviceType:y,manufacturer:b,name:i,provider:w,uid:F,version:0}];throw new Error("There's no default printer");case 4:throw g=C.sent(),new Error(g);case 5:return[2]}})})},this.setPrinter=function(l){d.device=l},this.getPrinter=function(){return d.device},this.cleanUpString=function(l){var p=l.split(":"),f=p[1].trim();return f},this.checkPrinterStatus=function(){return oe(d,void 0,void 0,function(){var l,p,f,u,h,i,y;return se(this,function(m){switch(m.label){case 0:return[4,this.write("~HQES")];case 1:return m.sent(),[4,this.read()];case 2:switch(l=m.sent(),p=[],f=!1,u=l.charAt(70),h=l.charAt(88),i=l.charAt(87),y=l.charAt(84),f=u==="0",h){case"1":p.push("Paper out");break;case"2":p.push("Ribbon Out");break;case"4":p.push("Media Door Open");break;case"8":p.push("Cutter Fault");break}switch(i){case"1":p.push("Printhead Overheating");break;case"2":p.push("Motor Overheating");break;case"4":p.push("Printhead Fault");break;case"8":p.push("Incorrect Printhead");break}return y==="1"&&p.push("Printer Paused"),!f&&p.length===0&&p.push("Error: Unknown Error"),[2,{isReadyToPrint:f,errors:p.join()}]}})})},this.write=function(l){return oe(d,void 0,void 0,function(){var p,f,u,h;return se(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),p=xe.API_URL+"write",f={device:this.device,data:l},u={method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify(f)},[4,fetch(p,u)];case 1:return i.sent(),[3,3];case 2:throw h=i.sent(),new Error(h);case 3:return[2]}})})},this.read=function(){return oe(d,void 0,void 0,function(){var l,p,f,u,h,i;return se(this,function(y){switch(y.label){case 0:return y.trys.push([0,3,,4]),l=xe.API_URL+"read",p={device:this.device},f={method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify(p)},[4,fetch(l,f)];case 1:return u=y.sent(),[4,u.text()];case 2:return h=y.sent(),[2,h];case 3:throw i=y.sent(),new Error(i);case 4:return[2]}})})},this.print=function(l){return oe(d,void 0,void 0,function(){var p;return se(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),[4,this.write(l)];case 1:return f.sent(),[3,3];case 2:throw p=f.sent(),new Error(p);case 3:return[2]}})})}}return x}(),ze=ar.default=ot;function st({handleClose:x,modalView:d,data:l}){const[p,f]=B.useState([]),[u,h]=B.useState(null);B.useState(!1),B.useState(""),B.useState("");const[i,y]=B.useState(!1),F=Ue({initialValues:(g=>({id:(g==null?void 0:g.id)??"",sala:(g==null?void 0:g.sala)??"",etiqueta:(g==null?void 0:g.etiqueta)??""}))(l),enableReinitialize:!0,onSubmit:async(g,{setSubmitting:C})=>{}});B.useEffect(()=>{new ze().getAvailablePrinters().then(C=>{f(C),C.length>0&&h(C[0])}).catch(C=>{console.error("Erro ao buscar impressoras:",C)})},[]);const w=async()=>{if(!u){alert("Nenhuma impressora Zebra disponível.");return}y(!0);const g=l==null?void 0:l.etiqueta,C=l==null?void 0:l.sala;try{const M=g==null?void 0:g.replace(/^data:image\/png;base64,/,""),X=await(await(await fetch(`data:image/png;base64,${M}`)).blob()).arrayBuffer(),K=or.Buffer.from(X),D=new Blob([K],{type:"image/png"}),k=new FormData;k.append("file",D,"etiqueta.png");const G=(await Fr.post("http://api.labelary.com/v1/graphics",k,{headers:{"Content-Type":"multipart/form-data"},responseType:"text"})).data.replace(/^\^XA/,"").replace(/\^XZ$/,"").replace(/^\^F/,"^FO250,70"),q=`^XA
^FO500,80^GFA,1100,1100,11,J07OFE,I07PFE,001QFC,003QFC,00RF8,01RF,03RF,07QFE,0RFC,:1RF8,1RF,3RF,3QFE,7QFE,7JF8L03FFE,7IFEM03IFC,7IFCM07JF8,7IF8M0KFC,JF8L01LF,JF8L01LF8,JF8L03LFC,JFM07LFE,JF8L07MF,JF8L0NF8,JF8K01NF8,7IF8K01NFC,7IFCK03NFC,7IFEK07NFE,7JF8J07NFE,7OFK0JFE,3NFEK07JF,3NFCK03JF,1NFCK01JF,1NF8K01JF,0NFM0JF,:07LFEM0JF,03LFEM0JF,01LFCM0JF,00LF8L01JF,003KFM01JF,001KFM01JF,I07IFEM03JF,J07FFCM0JFE,M03QFE,M07QFE,M07QFC,M0RFC,M0RF8,L01RF8,L03RF,L03QFE,L07QFC,L0RF8,L0RF,K01QFE,K01QF8,K03PFE,K07OFE,,::::01IFE003JFC0KF8,07JF80KFC1KF8,0KFC1KFC3KF8,1KFE1KFC3KF8,3FC00FE1F8J07E,3FI03F3FK07E,7EI03F1F8J07E,7EI01F9KF83JFE,7EI01F9KFC3KF8,7EI01F8KFC1KF8,7EI01F87JFE0KFC,7EI03FK07EK0FC,3FI07FK03EK0FC,3KFE1KFE3KFC,1KFE1KFE3KFC,0KFC1KFC3KF8,07JF01KF83KF,01IFC01KF03JFE,,:::002L08402,P04,P06,P0602,J02,,001M03,N02,,::::^FS
^FO230,20^A0,50,50^FB400,1,0,C^FD${C}^FS
`+G+"^XZ",J=new ze,E=await J.getDefaultPrinter();J.setPrinter(E);const z=await J.checkPrinterStatus();z.isReadyToPrint?(J.print(q),Ve({open:!0,message:"Etiqueta impressa com sucesso!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}})):(Ve({open:!0,message:"Erro ao imprimir etiqueta. Verifique se a impressora está conectada e a porta de entrada está aberta.",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"error"}}),console.log("Error/s",z.errors))}catch(M){console.error("Erro ao imprimir etiqueta:",M)}finally{y(!1)}},b=async g=>{for(let C=0;C<g;C++)await w()};return o.jsx(Te,{open:d,keepMounted:!0,onClose:()=>{x()},"aria-describedby":"alert-dialog-slide-description",children:o.jsx(ee,{sx:{p:1,py:1.5},children:o.jsx(de,{children:o.jsx(Pe,{value:F,children:o.jsxs(R,{container:!0,spacing:2.25,children:[o.jsx(R,{item:!0,xs:12,children:o.jsxs(ee,{sx:{textAlign:"center"},children:[o.jsx(pe,{variant:"h1",gutterBottom:!0,children:F.values.sala}),o.jsx("img",{src:F.values.etiqueta,alt:"",style:{width:"30%"}})]})}),o.jsx(R,{item:!0,xs:12,children:o.jsx(ue,{})}),o.jsx(R,{item:!0,xs:12,children:o.jsx(R,{container:!0,spacing:2,justifyContent:"center",children:o.jsxs(R,{item:!0,children:[o.jsx(v,{variant:"contained",sx:{backgroundColor:"#424242",color:"#fff",marginRight:1,"&:hover":{backgroundColor:"#212121"}},onClick:()=>{w()},disabled:i,className:`print-button ${i?"loading":""}`,children:i?"Imprimindo...":"Imprimir etiqueta da sala"}),o.jsx(v,{variant:"contained",sx:{backgroundColor:"#424242",color:"#fff","&:hover":{backgroundColor:"#212121"}},onClick:()=>{b(5)},disabled:i,className:`print-button ${i?"loading":""}`,children:i?"Imprimindo...":"Imprimir lotes de etiquetas"})]})})}),o.jsx(R,{item:!0,xs:12,children:o.jsx(ge,{children:o.jsx(v,{color:"error",onClick:()=>{x()},children:"Fechar"})})})]})})})})})}const at=x=>({sala:"",polo:"",descricao:"",img:""}),ct=({room:x,closeModal:d})=>{const[l,p]=B.useState(null),[f,u]=B.useState(null),h=B.useRef(null),i=B.useRef(null),[y,m]=B.useState(!1),[F,w]=B.useState(!1),[b,g]=B.useState([]),C=Ge().shape({sala:ae().max(255).required("Nome é obrigatorio"),polo:ae().max(255).required("Nome do Polo é obrigatorio"),descricao:ae().max(500)}),M=Ue({initialValues:at(),validationSchema:C,enableReinitialize:!0,onSubmit:async(E,{setSubmitting:z})=>{try{const I=new FormData;if(I.append("sala",String(E.sala)),I.append("poloId",String(E.polo)),I.append("descricao",E.descricao),E.img){const V=await(await fetch(E.img)).blob();I.append("imagem",V,"captured-photo.png")}await le.post("/inventory/rooms",I,{headers:{"Content-Type":"multipart/form-data"}}),z(!1),d()}catch(I){console.error("Error saving data:",I),z(!1)}}}),{errors:_,touched:N,handleSubmit:X,isSubmitting:K,getFieldProps:D,setFieldValue:k}=M,Y=async()=>{try{w(!0);const E=await navigator.mediaDevices.getUserMedia({video:!0});setTimeout(async()=>{p(E),h.current&&(h.current.srcObject=E,await h.current.play()),w(!1)},500),m(!0)}catch(E){console.error("Error accessing camera:",E),w(!1)}},$=()=>{l&&(l.getTracks().forEach(E=>{E.stop()}),p(null)),m(!1)},G=async()=>{if(h.current&&i.current){const E=i.current.getContext("2d");if(E){i.current.width=h.current.videoWidth,i.current.height=h.current.videoHeight,E.drawImage(h.current,0,0);const z=i.current.toDataURL("image/png");await k("img",z),$()}}},q=()=>{u(null)},J=async()=>{try{const E=await le.get("/inventory/polo/details");g(E.data.polos)}catch(E){console.error("Error fetching data:",E)}};return B.useEffect(()=>{J()},[]),o.jsx(Pe,{value:M,children:o.jsx(nr,{dateAdapter:ir,children:o.jsxs(He,{autoComplete:"off",noValidate:!0,onSubmit:X,children:[o.jsx(Qe,{children:"Nova Sala"}),o.jsx(ue,{}),o.jsx(de,{sx:{p:2.5},children:o.jsx(R,{container:!0,spacing:3,children:o.jsx(R,{item:!0,xs:12,children:o.jsxs(R,{container:!0,spacing:3,children:[o.jsx(R,{item:!0,xs:12,sm:6,children:o.jsxs(T,{spacing:1,children:[o.jsx(ce,{htmlFor:"sala",children:"Nome da Sala"}),o.jsx(me,{fullWidth:!0,id:"sala",placeholder:"Nome",...D("sala"),error:!!(N.sala&&_.sala),helperText:o.jsx(o.Fragment,{children:N.sala&&_.sala})})]})}),o.jsx(R,{item:!0,xs:12,sm:4,children:o.jsxs(T,{spacing:1,children:[o.jsx(ce,{htmlFor:"polo",children:"Polo"}),o.jsxs(Xe,{fullWidth:!0,error:!!(N.polo&&_.polo),children:[o.jsx(Ye,{id:"polo",placeholder:"Nome",...D("polo"),value:M.values.polo,children:b.map(E=>o.jsx(Ze,{value:E.id,children:E.polo},"polo_"+E.id))}),N.polo&&_.polo&&o.jsx(er,{children:typeof _.polo})]})]})}),o.jsx(R,{item:!0,xs:12,children:o.jsxs(T,{spacing:1,children:[o.jsx(ce,{htmlFor:"descricao",children:"Descrição"}),o.jsx(me,{fullWidth:!0,id:"descricao",multiline:!0,minRows:2,placeholder:"Descrição",...D("descricao"),error:!!(N.descricao&&_.descricao),helperText:o.jsx(o.Fragment,{children:N.descricao&&_.descricao})})]})}),o.jsx(R,{item:!0,xs:12,children:o.jsxs(T,{spacing:1,alignItems:"center",children:[F&&o.jsx(R,{item:!0,xs:4,children:o.jsx(ee,{style:{display:"flex",width:"20%",height:"auto",marginTop:20,justifyContent:"center",alignItems:"center"},children:o.jsx(Me,{})})}),!y&&!M.values.img&&!F&&o.jsx(v,{variant:"contained",onClick:Y,children:"Abrir Câmera"}),y&&o.jsxs(o.Fragment,{children:[o.jsx("video",{ref:h,style:{width:"20%",height:"auto",marginTop:20}}),o.jsx("canvas",{ref:i,style:{display:"none"}}),o.jsxs(T,{direction:"row",spacing:2,style:{marginTop:20},children:[o.jsx(v,{variant:"outlined",color:"error",onClick:$,children:"Cancelar"}),o.jsx(v,{variant:"contained",onClick:G,children:"Tirar Foto"})]})]}),M.values.img&&o.jsxs(T,{spacing:2,style:{marginTop:20,alignItems:"center"},children:[o.jsx("img",{src:M.values.img,alt:"Captured",style:{width:"20%",height:"auto"}}),o.jsx(v,{variant:"outlined",color:"error",onClick:q,children:"Remover Foto"})]})]})})]})})})}),o.jsx(ue,{}),o.jsx(ge,{sx:{p:2.5},children:o.jsx(R,{container:!0,justifyContent:"space-between",alignItems:"center",children:o.jsx(R,{item:!0,children:o.jsxs(T,{direction:"row",spacing:2,alignItems:"center",children:[o.jsx(v,{color:"error",onClick:d,children:"Cancelar"}),o.jsx(v,{type:"submit",variant:"contained",disabled:K,children:"Cadastrar"})]})})})})]})})})},lt=({openModalCreate:x,modalToggler:d,room:l})=>{const p=()=>{d(!1)},f=l?o.jsx(ee,{sx:{p:5},children:o.jsx(T,{direction:"row",justifyContent:"center",children:o.jsx(Wr,{})})}):o.jsx(ct,{room:l||null,closeModal:p});return o.jsx(Er,{open:x,onClose:p,"aria-labelledby":"modal-room-add-label","aria-describedby":"modal-room-add-description",sx:{"& .MuiPaper-root:focus":{outline:"none"}},children:o.jsx(rr,{sx:{width:"calc(100% - 48px)",minWidth:340,maxWidth:880,height:"auto",maxHeight:"calc(100vh - 48px)"},modal:!0,content:!1,children:o.jsx(Ir,{sx:{maxHeight:"calc(100vh - 48px)","& .simplebar-content":{display:"flex",flexDirection:"column"}},children:f})})})},ut=(x,d,l,p)=>{const f=$r(x.getValue(d),l);return p(f),f.passed};function ht({data:x,columns:d,modalToggler:l}){const p=tr(),f=Br(p.breakpoints.down("sm")),[u,h]=B.useState([{id:"id",desc:!0}]),[i,y]=B.useState({}),[m,F]=B.useState(""),w=jr({data:x,columns:d,state:{sorting:u,rowSelection:i,globalFilter:m},enableRowSelection:!0,onSortingChange:h,onRowSelectionChange:y,onGlobalFilterChange:F,getRowCanExpand:()=>!0,getSortedRowModel:Mr(),getFilteredRowModel:kr(),getCoreRowModel:Dr(),getPaginationRowModel:Lr(),getExpandedRowModel:vr(),globalFilterFn:ut,debugTable:!0});return o.jsxs(rr,{content:!1,children:[o.jsxs(T,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:2,...f&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[o.jsx(Cr,{value:m??"",onFilterChange:b=>{F(String(b))},placeholder:"Buscar Sala ..."}),o.jsxs(T,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:[o.jsx(zr,{getState:w.getState,getAllColumns:w.getAllColumns,setSorting:h}),o.jsx(T,{direction:"row",spacing:2,alignItems:"center",children:o.jsx(v,{variant:"contained",startIcon:o.jsx(Kr,{}),onClick:l,children:"Adicionar Sala"})})]})]}),o.jsx(br,{children:o.jsxs(T,{children:[o.jsx(Or,{selected:Object.keys(i).length}),o.jsx(Sr,{children:o.jsxs(Rr,{children:[o.jsx(Ar,{children:w.getHeaderGroups().map(b=>o.jsx(Ce,{children:b.headers.map(g=>(g.column.columnDef.meta!==void 0&&g.column.getCanSort()&&Object.assign(g.column.columnDef.meta,{className:g.column.columnDef.meta.className+" cursor-pointer prevent-select"}),o.jsx(be,{...g.column.columnDef.meta,onClick:g.column.getToggleSortingHandler(),...g.column.getCanSort()&&g.column.columnDef.meta===void 0&&{className:"cursor-pointer prevent-select"},children:g.isPlaceholder?null:o.jsxs(T,{direction:"row",spacing:1,alignItems:"center",children:[o.jsx(ee,{children:We(g.column.columnDef.header,g.getContext())}),g.column.getCanSort()&&o.jsx(Gr,{column:g.column})]})},g.id)))},b.id))}),o.jsx(Tr,{children:w.getRowModel().rows.length===0?o.jsx(Ce,{children:o.jsx(be,{colSpan:d.length,align:"center",children:o.jsx(Ur,{msg:"Nenhum registro encontrado"})})}):w.getRowModel().rows.map(b=>o.jsx(B.Fragment,{children:o.jsx(Ce,{children:b.getVisibleCells().map(g=>o.jsx(be,{...g.column.columnDef.meta,children:We(g.column.columnDef.cell,g.getContext())},g.id))})},b.id))})]})}),o.jsxs(o.Fragment,{children:[o.jsx(ue,{}),o.jsx(ee,{sx:{p:2},children:o.jsx(Pr,{setPageSize:w.setPageSize,setPageIndex:w.setPageIndex,getState:w.getState,getPageCount:w.getPageCount})})]})]})})]})}function yt(){const x=tr(),[d,l]=B.useState(!1),[p,f]=B.useState(!1),[u,h]=B.useState(!1),[i,y]=B.useState(!1),[m,F]=B.useState(!1),[w,b]=B.useState(null),[g,C]=B.useState(""),[M,_]=B.useState(""),[N,X]=B.useState([]),[K,D]=B.useState(!1),k=async()=>{try{D(!0);const E=await le.get("/inventory/rooms");X(E.data.salas.rows),D(!1)}catch(E){console.error("Erro ao buscar dados:",E),D(!1)}};B.useEffect(()=>{k()},[i,g,M,p,w]);const Y=()=>{l(!d)},$=()=>{y(!0)},G=()=>{F(!0)},q=()=>{f(!p)},J=B.useMemo(()=>[{id:"select",header:({table:E})=>o.jsx(qe,{checked:E.getIsAllRowsSelected(),indeterminate:E.getIsSomeRowsSelected(),onChange:E.getToggleAllRowsSelectedHandler()}),cell:({row:E})=>o.jsx(qe,{checked:E.getIsSelected(),disabled:!E.getCanSelect(),indeterminate:E.getIsSomeSelected(),onChange:E.getToggleSelectedHandler()}),meta:{className:"p-0"}},{accessorKey:"sala",header:"Sala"},{accessorKey:"polo.polo",header:"Polo"},{accessorKey:"descricao",header:"Descrição"},{id:"actions",header:"Ações",cell:({row:E})=>o.jsxs(T,{direction:"row",spacing:1,children:[o.jsx(Se,{title:"Vizualizar qrCode",children:o.jsx(Re,{color:"primary",onClick:()=>{b(E.original),G()},children:o.jsx(Nr,{})})}),o.jsx(Se,{title:"Editar",children:o.jsx(Re,{color:"primary",onClick:()=>{b(E.original),$()},children:o.jsx(qr,{})})}),o.jsx(Se,{title:"Excluir",children:o.jsx(Re,{color:"error",onClick:()=>{C(E.original.id),l(!0),_(E.original.sala)},children:o.jsx(Jr,{})})})]})}],[x]);return o.jsxs(o.Fragment,{children:[K?o.jsxs(ee,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",children:[o.jsx(Me,{}),o.jsx(pe,{variant:"body2",color:"textSecondary",sx:{mt:2},children:"Carregando..."})]}):o.jsx(ht,{data:N,columns:J,modalToggler:()=>{h(!0),b(null),q()}}),o.jsx(Hr,{id:g,title:g,open:d,handleClose:Y,name:M}),o.jsx(lt,{openModalCreate:p,modalToggler:q}),o.jsx(Qr,{modalEdit:i,handleClose:y,data:w}),o.jsx(st,{modalView:m,handleClose:F,data:w})]})}export{yt as default};
